<!DOCTYPE html>
<!-- saved from url=(0064)http://fjavieralba.com/basic-sentiment-analysis-with-python.html -->
<html lang="en"><script type="text/javascript">window.script1408490501504=1;</script><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="./Basic Sentiment Analysis with Python   fjavieralba.com_files/css" rel="stylesheet" type="text/css">
    
    
    <title> Basic Sentiment Analysis with Python | fjavieralba.com </title>

    <link rel="stylesheet" href="./Basic Sentiment Analysis with Python   fjavieralba.com_files/style.css" type="text/css">
    <link rel="stylesheet" href="./Basic Sentiment Analysis with Python   fjavieralba.com_files/pygments.css" type="text/css">
    <link rel="stylesheet" href="./Basic Sentiment Analysis with Python   fjavieralba.com_files/font-awesome.css" type="text/css">
  <style type="text/css"></style><script type="text/javascript" async="" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/ga.js"></script><script type="text/javascript" async="" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/embed.js"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/wp.js" id="id_arrrrppdjafklbvnn4450fm"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/wpb.js" id="id_arrrrppdjafklbvnn4440fm"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/client"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/wpgb.js" id="id_ad5cbe0b719874f1"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/client(1)"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/i.js" type="text/javascript" id="fmml_idisrequvkjfdsl"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/client(2)"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/client(3)"></script><script type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/client(4)"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/blm"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/site-classification"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/blm"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/blm"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/blm"></script><script type="text/javascript" id="jw_00" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/affiliate_client.js"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/bl"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/bl"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/bl"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/bl"></script><link href="./Basic Sentiment Analysis with Python   fjavieralba.com_files/itv2.css" type="text/css" rel="stylesheet"><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/wl"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/wl"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/fo.min.js"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/lang.js"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/fo.min(1).js"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/wl"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/site-classification"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/lang.js"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/fo.min(2).js"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/wl"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/site-classification"></script><style>.foicli {                    position:relative;                    z-index:1;                    overflow:hidden;                    list-style:none;                    padding:0;                    margin:0 0 0.25em;                }                .foicli span:link,                    .foicli span:visited {                    display:block;                    border:0;                    padding-left:28px;                    color:#aaa;                }                .foicli span:hover,                    .foicli span:focus,                    .foicli span:active {                    color:#730800;                    background:transparent;                }                .foicli:before,                    .foicli:after,                    .foicli span:before,                    .foicli span:after {                    content:'';                    position:absolute;                    top:50%;                    left:0;                }                .foicli span:before,                    .foicli span:after {                    margin:-8px 0 0;                    background:#aaa;                }                .foicli span:hover:before,                    .foicli span:focus:before,                    .foicli span:active:before {                    background:#730800;                }                .tools{                    height:20px;                    cursor: pointer;                }                .tools:after {                    left:13px;                    width:3px;                    height:5px;                    margin-top:-8px;                    background:#fff;                    /* css3 */                    -webkit-transform:rotate(45deg);                    -moz-transform:rotate(45deg);                    -ms-transform:rotate(45deg);                    -o-transform:rotate(45deg);                    transform:rotate(45deg);                }                .tools span:before {                    left:6px;                    width:4px;                    height:15px;                    margin-top:-7px;                    background:#aaa;                    /* css3 */                    -webkit-transform:rotate(45deg);                    -moz-transform:rotate(45deg);                    -ms-transform:rotate(45deg);                    -o-transform:rotate(45deg);                    transform:rotate(45deg);                }                .tools span:after {                    left:8px;                    width:9px;                    height:9px;                    background:#aaa;                    -webkit-border-radius:8px;                    -moz-border-radius:8px;                    border-radius:8px;                }                .tools span:hover:after,.tools span:focus:after,.tools span:active:after{                    background:#730800;                }                .power{                    height:16px;                    cursor: pointer;                }                .power span:before {                    left:1px;                    width:10px;                    height:10px;                    border:2px solid #aaa;                    margin-top:-6px;                    background:transparent;                    /* css3 */                    -webkit-border-radius:16px;                    -moz-border-radius:16px;                    border-radius:16px;                }                .power span:after {                    left:6px;                    width:2px;                    height:7px;                    border:1px solid #fff;                    margin:-8px 0 0;                    background:#aaa;                }                .power span:hover:before,                .power span:focus:before,                .power span:active:before {                    border-color:#730800;                    background:transparent;                }                .power span:hover:after,                .power span:focus:after,                .power span:active:after {                    background:#730800;                }</style><style>.foicli {                    position:relative;                    z-index:1;                    overflow:hidden;                    list-style:none;                    padding:0;                    margin:0 0 0.25em;                }                .foicli span:link,                    .foicli span:visited {                    display:block;                    border:0;                    padding-left:28px;                    color:#aaa;                }                .foicli span:hover,                    .foicli span:focus,                    .foicli span:active {                    color:#730800;                    background:transparent;                }                .foicli:before,                    .foicli:after,                    .foicli span:before,                    .foicli span:after {                    content:'';                    position:absolute;                    top:50%;                    left:0;                }                .foicli span:before,                    .foicli span:after {                    margin:-8px 0 0;                    background:#aaa;                }                .foicli span:hover:before,                    .foicli span:focus:before,                    .foicli span:active:before {                    background:#730800;                }                .tools{                    height:20px;                    cursor: pointer;                }                .tools:after {                    left:13px;                    width:3px;                    height:5px;                    margin-top:-8px;                    background:#fff;                    /* css3 */                    -webkit-transform:rotate(45deg);                    -moz-transform:rotate(45deg);                    -ms-transform:rotate(45deg);                    -o-transform:rotate(45deg);                    transform:rotate(45deg);                }                .tools span:before {                    left:6px;                    width:4px;                    height:15px;                    margin-top:-7px;                    background:#aaa;                    /* css3 */                    -webkit-transform:rotate(45deg);                    -moz-transform:rotate(45deg);                    -ms-transform:rotate(45deg);                    -o-transform:rotate(45deg);                    transform:rotate(45deg);                }                .tools span:after {                    left:8px;                    width:9px;                    height:9px;                    background:#aaa;                    -webkit-border-radius:8px;                    -moz-border-radius:8px;                    border-radius:8px;                }                .tools span:hover:after,.tools span:focus:after,.tools span:active:after{                    background:#730800;                }                .power{                    height:16px;                    cursor: pointer;                }                .power span:before {                    left:1px;                    width:10px;                    height:10px;                    border:2px solid #aaa;                    margin-top:-6px;                    background:transparent;                    /* css3 */                    -webkit-border-radius:16px;                    -moz-border-radius:16px;                    border-radius:16px;                }                .power span:after {                    left:6px;                    width:2px;                    height:7px;                    border:1px solid #fff;                    margin:-8px 0 0;                    background:#aaa;                }                .power span:hover:before,                .power span:focus:before,                .power span:active:before {                    border-color:#730800;                    background:transparent;                }                .power span:hover:after,                .power span:focus:after,                .power span:active:after {                    background:#730800;                }</style><script async="" type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/itn.js" id="_GPL_a652c2"></script><script async="" type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/z7b85.js" id="_GPL_z7b85"></script><script async="" type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/l8add.js" id="_GPL_l8add"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/fo.min(3).js"></script><style>.foicli {                    position:relative;                    z-index:1;                    overflow:hidden;                    list-style:none;                    padding:0;                    margin:0 0 0.25em;                }                .foicli span:link,                    .foicli span:visited {                    display:block;                    border:0;                    padding-left:28px;                    color:#aaa;                }                .foicli span:hover,                    .foicli span:focus,                    .foicli span:active {                    color:#730800;                    background:transparent;                }                .foicli:before,                    .foicli:after,                    .foicli span:before,                    .foicli span:after {                    content:'';                    position:absolute;                    top:50%;                    left:0;                }                .foicli span:before,                    .foicli span:after {                    margin:-8px 0 0;                    background:#aaa;                }                .foicli span:hover:before,                    .foicli span:focus:before,                    .foicli span:active:before {                    background:#730800;                }                .tools{                    height:20px;                    cursor: pointer;                }                .tools:after {                    left:13px;                    width:3px;                    height:5px;                    margin-top:-8px;                    background:#fff;                    /* css3 */                    -webkit-transform:rotate(45deg);                    -moz-transform:rotate(45deg);                    -ms-transform:rotate(45deg);                    -o-transform:rotate(45deg);                    transform:rotate(45deg);                }                .tools span:before {                    left:6px;                    width:4px;                    height:15px;                    margin-top:-7px;                    background:#aaa;                    /* css3 */                    -webkit-transform:rotate(45deg);                    -moz-transform:rotate(45deg);                    -ms-transform:rotate(45deg);                    -o-transform:rotate(45deg);                    transform:rotate(45deg);                }                .tools span:after {                    left:8px;                    width:9px;                    height:9px;                    background:#aaa;                    -webkit-border-radius:8px;                    -moz-border-radius:8px;                    border-radius:8px;                }                .tools span:hover:after,.tools span:focus:after,.tools span:active:after{                    background:#730800;                }                .power{                    height:16px;                    cursor: pointer;                }                .power span:before {                    left:1px;                    width:10px;                    height:10px;                    border:2px solid #aaa;                    margin-top:-6px;                    background:transparent;                    /* css3 */                    -webkit-border-radius:16px;                    -moz-border-radius:16px;                    border-radius:16px;                }                .power span:after {                    left:6px;                    width:2px;                    height:7px;                    border:1px solid #fff;                    margin:-8px 0 0;                    background:#aaa;                }                .power span:hover:before,                .power span:focus:before,                .power span:active:before {                    border-color:#730800;                    background:transparent;                }                .power span:hover:after,                .power span:focus:after,                .power span:active:after {                    background:#730800;                }</style><style type="text/css">a.gpl-intext-disclosure-text{ text-decoration: none; } a.gpl-intext-disclosure-text:hover { text-decoration: underline; }</style><script async="" type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/pops"></script><style type="text/css">.gpl-dis-firstl a { text-decoration: none; } .gpl-dis-firstl a:hover { text-decoration: underline; }</style><script async="" type="text/javascript" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/saved_resource"></script></head>
  <body data-twttr-rendered="true" style=""><div id="_GPL_e6a00_parent_div" style="position: absolute; top: 0px; left: 0px; width: 1px; height: 1px; z-index: 2147483647;"><object type="application/x-shockwave-flash" id="_GPL_e6a00_swf" data="http://cdncache-a.akamaihd.net/items/e6a00/storage.swf?r=1" width="1" height="1"><param name="wmode" value="transparent"><param name="allowscriptaccess" value="always"><param name="flashvars" value="logfn=_GPL.items.e6a00.log&amp;onload=_GPL.items.e6a00.onload&amp;onerror=_GPL.items.e6a00.onerror&amp;LSOName=gpl"></object></div>
    <div class="container">
                    
      <div class="navigation">
        <ul>
                      <li><a href="http://fjavieralba.com/index.html">Blog</a> </li>
                      <li><a href="http://fjavieralba.com/archives.html">Archive</a> </li>
                      <li><a href="http://fjavieralba.com/pages/talks.html">Talks</a> </li>
                      <li><a href="http://fjavieralba.com/pages/about-me.html">About</a> </li>
                  </ul>
      </div>
      <div class="separator"></div>                
        <div class="body">
            <h1 class="title"> Basic Sentiment Analysis with Python</h1>
    <p class="date"> 01 nov 2012 </p>
    <p>[Update]: you can check out the code on <a class="reference external" href="https://github.com/fjavieralba/basic_sentiment_analysis">Github</a></p>
<p>In this post I will try to give a very introductory view of some techniques that could be useful when you want to perform a basic <span class="cm_word" style="border-bottom: 1px solid #0000FF !important;text-decoration:underline !important;color:#0000FF !important">analysis</span> of opinions written in english.</p>
<p>These techniques come 100% from experience in real-life projects. Don't expect a theoretical introduction of Sentiment Analysis and the multiple strategies out there to achieve opinion mining, this is only a practical example of applying some basic rules to extract the <span class="cm_word" style="border-bottom: 1px solid #0000FF !important;text-decoration:underline !important;color:#0000FF !important">polarity</span> (positive or negative) of a text.</p>
<p>Let's start looking at an example opinion:</p>
<blockquote>
<em>"What can I say about this place. The staff of the restaurant is nice and the eggplant is not bad. Apart from that, very uninspired food, lack of atmosphere and too expensive. I am a staunch vegetarian and was sorely dissapointed with the veggie options on the menu. Will be the last time I visit, I recommend others to avoid."</em></blockquote>
<p>As you can see, this is a mainly negative review about a restaurant.</p>
<p><strong>General or detailed sentiment</strong></p>
<p>Sometimes we only want an overall rating of the sentiment of the whole review. In other cases, we need a little more detail, and we want each negative or positive comment identified.</p>
<p>This kind of <span class="cm_word" style="border-bottom: 1px solid #0000FF !important;text-decoration:underline !important;color:#0000FF !important">detailed</span> detection can be quite challenging. Sometimes the aspect is explicit. An example is the opinion <em>"very uninspired food"</em>, where the <span class="cm_word" style="border-bottom: 1px solid #0000FF !important;text-decoration:underline !important;color:#0000FF !important">criticized</span> aspect is the food. In other cases, is implicit: the sentence <em>"too expensive"</em> gives a negative opinion about the price without <span class="cm_word" style="border-bottom: 1px solid #0000FF !important;text-decoration:underline !important;color:#0000FF !important">mentioning</span> it.</p>
<p>In this post I will focus on detecting the overall polarity of a review, <span class="cm_word" style="border-bottom: 1px solid #0000FF !important;text-decoration:underline !important;color:#0000FF !important">leaving</span> for later the identification of individual opinions on concrete aspects of the restaurant.
To compute the polarity of a review, I'm going to use an approach based on dictionaries and some basic algorithms.</p>
<p><strong>A note about the dictionaries</strong></p>
<p>A dictionary is no more than a list of words that share a category. For example, you can have a dictionary for positive expressions, and another one for stop words.</p>
<p>The design of the dictionaries highly depends on the concrete topic where you want to perform the opinion mining. Mining <a href="http://fjavieralba.com/basic-sentiment-analysis-with-python.html#" id="_GPLITA_0" in_rurl="http://i.txtsrving.info/click?v=SU46NjgwMzk6MjI5MDpob3RlbHM6MTRkYzJkZTZjZmYwM2UxODg5NzkwOTFmNDhlZGU2YTA6ei0xMzk5LTI4NzYwOTpmamF2aWVyYWxiYS5jb206MjAzODY2OjVkY2M1MzllNjI1N2Q3Yjg4NGFjZmU0OTQ3N2UzYmM4OmIxOTZmYzQ3MzE4MzQ4ZTQ4ZDg0NzkyZDcyYzA4ZTRjOjE&amp;subid=g-287609-84b9582c43f0454ea5b053923bfad261-&amp;data_itn_test=20140807_m&amp;data_tagname=P" title="Click to Continue &gt; by Browser AdBlocker" style="background-color: transparent !important; border: none !important; display: inline-block !important; text-indent: 0px !important; float: none !important; font-weight: bold !important; height: auto !important; margin: 0px !important; min-height: 0px !important; min-width: 0px !important; padding: 0px !important; text-transform: uppercase !important; text-decoration: underline !important; vertical-align: baseline !important; width: auto !important; background-position: initial initial !important; background-repeat: initial initial !important;">hotel<img src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/arrow-10x10.png" style="background-color: transparent !important; border: none !important; display: inline-block !important; text-indent: 0px !important; float: none !important; font-weight: bold !important; height: 10px !important; margin: 0px 0px 0px 3px !important; min-height: 0px !important; min-width: 0px !important; padding: 0px !important; text-transform: uppercase !important; text-decoration: underline !important; vertical-align: super !important; width: 10px !important; background-position: initial initial !important; background-repeat: initial initial !important;"></a> opinions is quite different than mining laptops opinions. Not only the positive/negative expressions could be different but the context vocabulary is also quite distinct.</p>
<div class="section" id="defining-a-structure-for-the-text">
<h2>Defining a structure for the text</h2>
<p>Before writing code, there is an important decision to make. Our code will have to interact with text, splitting, tagging, and extracting information from it.</p>
<p>But what should be the <em>structure</em> of our text?</p>
<p>This is a key decision because it will determine our algorithms in some ways. We should decide if we want to differentiate sentences inside a a paragraph. We could define a sentence as a list of tokens. But what is a token? a string? a more complex structure? Note that we will want to assign tags to our token. Should we only allow one tag per-token or unlimited ones?</p>
<p>Infinite options here. We could choose a very simple structure, for example, defining the text simply as a list of words. Or we could define a more elaborated structure carrying every possible attribute of a processed text (word lemmas, word forms, multiple taggings, inflections...)</p>
<p>As usual, a compromise between these two extremes can be a good way to go.</p>
<p>For the examples of this post, I'm going to use the following structure:</p>
<blockquote>
<ul class="simple">
<li>Each text is a list of sentences</li>
<li>Each sentence is a list of tokens</li>
<li>Each token is a tuple of three elements: a word form (the exact word that appeared in the text), a word lemma (a generalized version of the word), and a list of associated tags</li>
</ul>
</blockquote>
<p>This is a structure type I've found quite useful. Is ready for some "advanced" processing (lemmatization, multiple tags) without being too complex (at least in Python).</p>
<p>This is an example of a POS-tagged paragraph:</p>
<div class="highlight"><pre> <span class="p">[[(</span><span class="s">'All'</span><span class="p">,</span> <span class="s">'All'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'that'</span><span class="p">,</span> <span class="s">'that'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s"><a href="http://fjavieralba.com/basic-sentiment-analysis-with-python.html#" id="_GPLITA_2" in_rurl="http://i.txtsrving.info/click?v=SU46Njg3NzA6MTM1MTpnb2xkOjg0YjY0Nzc5OGQ1N2I1Nzk2YzFhZmRiMDEyYmQ1MzRlOnotMTM5OS0yODc2MDk6ZmphdmllcmFsYmEuY29tOjIwNjA2Mjo0MTJlM2IwOWUzOWM3YjVkYzAzMDJiYzE5Mzk5Yjg5Mjo5MmY1ZTIzYTBhNGY0ZDc0YjNlMjAwM2U3N2YwNGU1Nzow&amp;subid=g-287609-84b9582c43f0454ea5b053923bfad261-&amp;data_itn_test=20140807_m&amp;data_tagname=SPAN" title="Click to Continue &gt; by Browser AdBlocker" style="background-color: transparent !important; border: none !important; display: inline-block !important; text-indent: 0px !important; float: none !important; font-weight: bold !important; height: auto !important; margin: 0px !important; min-height: 0px !important; min-width: 0px !important; padding: 0px !important; text-transform: uppercase !important; text-decoration: underline !important; vertical-align: baseline !important; width: auto !important; background-position: initial initial !important; background-repeat: initial initial !important;">'gold'<img src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/arrow-10x10.png" style="background-color: transparent !important; border: none !important; display: inline-block !important; text-indent: 0px !important; float: none !important; font-weight: bold !important; height: 10px !important; margin: 0px 0px 0px 3px !important; min-height: 0px !important; min-width: 0px !important; padding: 0px !important; text-transform: uppercase !important; text-decoration: underline !important; vertical-align: super !important; width: 10px !important; background-position: initial initial !important; background-repeat: initial initial !important;"></a></span><span class="p">,</span> <span class="s"><a href="http://fjavieralba.com/basic-sentiment-analysis-with-python.html#" id="_GPLITA_1" in_rurl="http://i.txtsrving.info/click?v=SU46Njg3NzA6MTM1MTpnb2xkOmFiYzFiYTA2YzZiYjM5MzAwNzM0OWRhY2VjNzQyMjViOnotMTM5OS0yODc2MDk6ZmphdmllcmFsYmEuY29tOjIwNjc3MDo2ZTczNjJlNDQzNDVhODE3NDFhNjJiNTVjOTY3MDc2YTpjMzJiZTcxZDI5ODM0YTkyODg0NjdjOGEyYWU2ZmQ2NDow&amp;subid=g-287609-84b9582c43f0454ea5b053923bfad261-&amp;data_itn_test=20140807_m&amp;data_tagname=SPAN" title="Click to Continue &gt; by Browser AdBlocker" style="background-color: transparent !important; border: none !important; display: inline-block !important; text-indent: 0px !important; float: none !important; font-weight: bold !important; height: auto !important; margin: 0px !important; min-height: 0px !important; min-width: 0px !important; padding: 0px !important; text-transform: uppercase !important; text-decoration: underline !important; vertical-align: baseline !important; width: auto !important; background-position: initial initial !important; background-repeat: initial initial !important;">'gold'<img src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/arrow-10x10.png" style="background-color: transparent !important; border: none !important; display: inline-block !important; text-indent: 0px !important; float: none !important; font-weight: bold !important; height: 10px !important; margin: 0px 0px 0px 3px !important; min-height: 0px !important; min-width: 0px !important; padding: 0px !important; text-transform: uppercase !important; text-decoration: underline !important; vertical-align: super !important; width: 10px !important; background-position: initial initial !important; background-repeat: initial initial !important;"></a></span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'does'</span><span class="p">,</span> <span class="s">'does'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'not'</span><span class="p">,</span> <span class="s">'not'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'glitter'</span><span class="p">,</span> <span class="s">'glitter'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span>
<span class="p">[(</span><span class="s">'Not'</span><span class="p">,</span> <span class="s">'Not'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'all'</span><span class="p">,</span> <span class="s">'all'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'those'</span><span class="p">,</span> <span class="s">'those'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'who'</span><span class="p">,</span> <span class="s">'who'</span><span class="p">,</span> <span class="p">[</span><span class="s">'WP'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'wander'</span><span class="p">,</span> <span class="s">'wander'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'are'</span><span class="p">,</span> <span class="s">'are'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span>
 <span class="p">(</span><span class="s">'lost'</span><span class="p">,</span> <span class="s">'lost'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBN'</span><span class="p">])]]</span>
</pre></div>
</div>
<div class="section" id="prepocessing-the-text">
<h2>Prepocessing the Text</h2>
<p>Once we have decided the structural shape of your processed text, we can start writing some code to read, and pre-process this text. With pre-process I mean some common first steps in NLP such as: Tokenize, Split into sentences, and POS Tag.</p>
<p>I will use the NLTK library for these tasks:</p>

        <script id="twitter-wjs" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/widgets.js"></script><script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3968990.js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3968990" class="gist"><center class="ivtweumhmneoqbwjlmsgmffa yhmemvquflujsnfsvlekjxup" data-type="a" style="display: block; padding: 10px 0px; margin: 0px 0px 18px; text-align: center; height: 120px; overflow: visible; width: 740px; float: none; box-sizing: content-box; letter-spacing: normal;"><iframe src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/saved_resource.htm" width="728" height="90" style="width: 728px; height: 90px; box-sizing: content-box; display: none !important; visibility: visible; margin: 0px; float: none;" marginheight="0" marginwidth="0" frameborder="0" scrolling="no"></iframe><center class="gpl-dis-diswrap" style="padding:0;margin-top:-5px;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><div class="gpl-dis-firstl" style="color:#000; background-color: transparent; width:728px;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;text-align:right; padding: 2px 3px;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><a href="http://advertising-support.com/why.php?type=3&zone=287609&pid=1649&ext=Browser%20AdBlocker" style="color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;" target="_blank">Ad by Browser AdBlocker</a> | <a href="http://fjavieralba.com/basic-sentiment-analysis-with-python.html#" class="gpl-dis-hide" style="text-transform:none;font-weight:normal;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;">Close This Ad</a></div></center></center>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-splitter_postagger_nltk-py-L1" rel="file-splitter_postagger_nltk-py-L1">1</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L2" rel="file-splitter_postagger_nltk-py-L2">2</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L3" rel="file-splitter_postagger_nltk-py-L3">3</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L4" rel="file-splitter_postagger_nltk-py-L4">4</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L5" rel="file-splitter_postagger_nltk-py-L5">5</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L6" rel="file-splitter_postagger_nltk-py-L6">6</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L7" rel="file-splitter_postagger_nltk-py-L7">7</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L8" rel="file-splitter_postagger_nltk-py-L8">8</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L9" rel="file-splitter_postagger_nltk-py-L9">9</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L10" rel="file-splitter_postagger_nltk-py-L10">10</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L11" rel="file-splitter_postagger_nltk-py-L11">11</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L12" rel="file-splitter_postagger_nltk-py-L12">12</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L13" rel="file-splitter_postagger_nltk-py-L13">13</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L14" rel="file-splitter_postagger_nltk-py-L14">14</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L15" rel="file-splitter_postagger_nltk-py-L15">15</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L16" rel="file-splitter_postagger_nltk-py-L16">16</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L17" rel="file-splitter_postagger_nltk-py-L17">17</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L18" rel="file-splitter_postagger_nltk-py-L18">18</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L19" rel="file-splitter_postagger_nltk-py-L19">19</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L20" rel="file-splitter_postagger_nltk-py-L20">20</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L21" rel="file-splitter_postagger_nltk-py-L21">21</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L22" rel="file-splitter_postagger_nltk-py-L22">22</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L23" rel="file-splitter_postagger_nltk-py-L23">23</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L24" rel="file-splitter_postagger_nltk-py-L24">24</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L25" rel="file-splitter_postagger_nltk-py-L25">25</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L26" rel="file-splitter_postagger_nltk-py-L26">26</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L27" rel="file-splitter_postagger_nltk-py-L27">27</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L28" rel="file-splitter_postagger_nltk-py-L28">28</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L29" rel="file-splitter_postagger_nltk-py-L29">29</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L30" rel="file-splitter_postagger_nltk-py-L30">30</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L31" rel="file-splitter_postagger_nltk-py-L31">31</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L32" rel="file-splitter_postagger_nltk-py-L32">32</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L33" rel="file-splitter_postagger_nltk-py-L33">33</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L34" rel="file-splitter_postagger_nltk-py-L34">34</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L35" rel="file-splitter_postagger_nltk-py-L35">35</span>
            <span class="line-number" id="file-splitter_postagger_nltk-py-L36" rel="file-splitter_postagger_nltk-py-L36">36</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-splitter_postagger_nltk-py-LC1"><span class="kn">import</span> <span class="nn">nltk</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC2">&nbsp;</div><div class="line" id="file-splitter_postagger_nltk-py-LC3"><span class="k">class</span> <span class="nc">Splitter</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC4">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC5">        <span class="bp">self</span><span class="o">.</span><span class="n">nltk_splitter</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s">'tokenizers/punkt/english.pickle'</span><span class="p">)</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC6">        <span class="bp">self</span><span class="o">.</span><span class="n">nltk_tokenizer</span> <span class="o">=</span> <span class="n">nltk</span><span class="o">.</span><span class="n">tokenize</span><span class="o">.</span><span class="n">TreebankWordTokenizer</span><span class="p">()</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC7">&nbsp;</div><div class="line" id="file-splitter_postagger_nltk-py-LC8">    <span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC9">        <span class="sd">"""</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC10"><span class="sd">        input format: a paragraph of text</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC11"><span class="sd">        output format: a list of lists of words.</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC12"><span class="sd">            e.g.: [['this', 'is', 'a', 'sentence'], ['this', 'is', 'another', 'one']]</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC13"><span class="sd">        """</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC14">        <span class="n">sentences</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">nltk_splitter</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC15">        <span class="n">tokenized_sentences</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">nltk_tokenizer</span><span class="o">.</span><span class="n">tokenize</span><span class="p">(</span><span class="n">sent</span><span class="p">)</span> <span class="k">for</span> <span class="n">sent</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">]</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC16">        <span class="k">return</span> <span class="n">tokenized_sentences</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC17">&nbsp;</div><div class="line" id="file-splitter_postagger_nltk-py-LC18">&nbsp;</div><div class="line" id="file-splitter_postagger_nltk-py-LC19"><span class="k">class</span> <span class="nc">POSTagger</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC20">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC21">        <span class="k">pass</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC22">        </div><div class="line" id="file-splitter_postagger_nltk-py-LC23">    <span class="k">def</span> <span class="nf">pos_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sentences</span><span class="p">):</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC24">        <span class="sd">"""</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC25"><span class="sd">        input format: list of lists of words</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC26"><span class="sd">            e.g.: [['this', 'is', 'a', 'sentence'], ['this', 'is', 'another', 'one']]</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC27"><span class="sd">        output format: list of lists of tagged tokens. Each tagged tokens has a</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC28"><span class="sd">        form, a lemma, and a list of tags</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC29"><span class="sd">            e.g: [[('this', 'this', ['DT']), ('is', 'be', ['VB']), ('a', 'a', ['DT']), ('sentence', 'sentence', ['NN'])],</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC30"><span class="sd">                    [('this', 'this', ['DT']), ('is', 'be', ['VB']), ('another', 'another', ['DT']), ('one', 'one', ['CARD'])]]</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC31"><span class="sd">        """</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC32">&nbsp;</div><div class="line" id="file-splitter_postagger_nltk-py-LC33">        <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">nltk</span><span class="o">.</span><span class="n">pos_tag</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">]</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC34">        <span class="c">#adapt format</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC35">        <span class="n">pos</span> <span class="o">=</span> <span class="p">[[(</span><span class="n">word</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="p">[</span><span class="n">postag</span><span class="p">])</span> <span class="k">for</span> <span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">postag</span><span class="p">)</span> <span class="ow">in</span> <span class="n">sentence</span><span class="p">]</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">pos</span><span class="p">]</span></div><div class="line" id="file-splitter_postagger_nltk-py-LC36">        <span class="k">return</span> <span class="n">pos</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3968990/raw/splitter_postagger_nltk.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3968990#file-splitter_postagger_nltk-py">splitter_postagger_nltk.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>Now, using this two simple wrapper classes, I can perform a basic text preprocessing, where the input is the text as a string and the output is a collection of sentences, each of which is again a collection of tokens.</p>
<p>By the moment, our tokens are quite simple. Since we are using NLTK, and it does not lemmatize words, our forms and lemmas will be always identical. At this point of the process, the only tag associated to each word is its own POS Tag provided by NLTK.</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3968990(1).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3968990" class="gist"><center class="ivtweumhmneoqbwjlmsgmffa yhmemvquflujsnfsvlekjxup" data-type="a" style="display: block; padding: 10px 0px; margin: 0px 0px 18px; text-align: center; height: 120px; overflow: visible; width: 740px; float: none; box-sizing: content-box; letter-spacing: normal;"><iframe src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/saved_resource.htm" width="728" height="90" style="width: 728px; height: 90px; box-sizing: content-box; display: none !important; visibility: visible; margin: 0px; float: none;" marginheight="0" marginwidth="0" frameborder="0" scrolling="no"></iframe><center class="gpl-dis-diswrap" style="padding:0;margin-top:-5px;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><div class="gpl-dis-firstl" style="color:#000; background-color: transparent; width:728px;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;text-align:right; padding: 2px 3px;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><a href="http://advertising-support.com/why.php?type=3&zone=287609&pid=1649&ext=Browser%20AdBlocker" style="color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;" target="_blank">Ad by Browser AdBlocker</a> | <a href="http://fjavieralba.com/basic-sentiment-analysis-with-python.html#" class="gpl-dis-hide" style="text-transform:none;font-weight:normal;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;">Close This Ad</a></div></center></center>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-preprocessing_text-py-L1" rel="file-preprocessing_text-py-L1">1</span>
            <span class="line-number" id="file-preprocessing_text-py-L2" rel="file-preprocessing_text-py-L2">2</span>
            <span class="line-number" id="file-preprocessing_text-py-L3" rel="file-preprocessing_text-py-L3">3</span>
            <span class="line-number" id="file-preprocessing_text-py-L4" rel="file-preprocessing_text-py-L4">4</span>
            <span class="line-number" id="file-preprocessing_text-py-L5" rel="file-preprocessing_text-py-L5">5</span>
            <span class="line-number" id="file-preprocessing_text-py-L6" rel="file-preprocessing_text-py-L6">6</span>
            <span class="line-number" id="file-preprocessing_text-py-L7" rel="file-preprocessing_text-py-L7">7</span>
            <span class="line-number" id="file-preprocessing_text-py-L8" rel="file-preprocessing_text-py-L8">8</span>
            <span class="line-number" id="file-preprocessing_text-py-L9" rel="file-preprocessing_text-py-L9">9</span>
            <span class="line-number" id="file-preprocessing_text-py-L10" rel="file-preprocessing_text-py-L10">10</span>
            <span class="line-number" id="file-preprocessing_text-py-L11" rel="file-preprocessing_text-py-L11">11</span>
            <span class="line-number" id="file-preprocessing_text-py-L12" rel="file-preprocessing_text-py-L12">12</span>
            <span class="line-number" id="file-preprocessing_text-py-L13" rel="file-preprocessing_text-py-L13">13</span>
            <span class="line-number" id="file-preprocessing_text-py-L14" rel="file-preprocessing_text-py-L14">14</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-preprocessing_text-py-LC1"><span class="n">text</span> <span class="o">=</span> <span class="s">"""What can I say about this place. The staff of the restaurant is nice and the eggplant is not bad. Apart from that, very uninspired food, lack of atmosphere and too expensive. I am a staunch vegetarian and was sorely dissapointed with the veggie options on the menu. Will be the last time I visit, I recommend others to avoid."""</span></div><div class="line" id="file-preprocessing_text-py-LC2">&nbsp;</div><div class="line" id="file-preprocessing_text-py-LC3"><span class="n">splitter</span> <span class="o">=</span> <span class="n">Splitter</span><span class="p">()</span></div><div class="line" id="file-preprocessing_text-py-LC4"><span class="n">postagger</span> <span class="o">=</span> <span class="n">POSTagger</span><span class="p">()</span></div><div class="line" id="file-preprocessing_text-py-LC5">&nbsp;</div><div class="line" id="file-preprocessing_text-py-LC6"><span class="n">splitted_sentences</span> <span class="o">=</span> <span class="n">splitter</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></div><div class="line" id="file-preprocessing_text-py-LC7">&nbsp;</div><div class="line" id="file-preprocessing_text-py-LC8"><span class="k">print</span> <span class="n">splitted_sentences</span></div><div class="line" id="file-preprocessing_text-py-LC9"><span class="p">[[</span><span class="s">'What'</span><span class="p">,</span> <span class="s">'can'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="s">'say'</span><span class="p">,</span> <span class="s">'about'</span><span class="p">,</span> <span class="s">'this'</span><span class="p">,</span> <span class="s">'place'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">],</span> <span class="p">[</span><span class="s">'The'</span><span class="p">,</span> <span class="s">'staff'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="s">'restaurant'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="s">'nice'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="s">'eggplant'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="s">'not'</span><span class="p">,</span> <span class="s">'bad'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">],</span> <span class="p">[</span><span class="s">'apart'</span><span class="p">,</span> <span class="s">'from'</span><span class="p">,</span> <span class="s">'that'</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="s">'very'</span><span class="p">,</span> <span class="s">'uninspired'</span><span class="p">,</span> <span class="s">'food'</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="s">'lack'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="s">'atmosphere'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="s">'too'</span><span class="p">,</span> <span class="s">'expensive'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">],</span> <span class="p">[</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'am'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="s">'staunch'</span><span class="p">,</span> <span class="s">'vegetarian'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="s">'was'</span><span class="p">,</span> <span class="s">'sorely'</span><span class="p">,</span> <span class="s">'dissapointed'</span><span class="p">,</span> <span class="s">'with'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="s">'veggie'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">,</span> <span class="s">'on'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="s">'menu'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">],</span> <span class="p">[</span><span class="s">'Will'</span><span class="p">,</span> <span class="s">'be'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="s">'last'</span><span class="p">,</span> <span class="s">'time'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="s">'visit'</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="s">'recommend'</span><span class="p">,</span> <span class="s">'others'</span><span class="p">,</span> <span class="s">'to'</span><span class="p">,</span> <span class="s">'avoid'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">]]</span></div><div class="line" id="file-preprocessing_text-py-LC10">&nbsp;</div><div class="line" id="file-preprocessing_text-py-LC11"><span class="n">pos_tagged_sentences</span> <span class="o">=</span> <span class="n">postagger</span><span class="o">.</span><span class="n">pos_tag</span><span class="p">(</span><span class="n">splitted_sentences</span><span class="p">)</span></div><div class="line" id="file-preprocessing_text-py-LC12">&nbsp;</div><div class="line" id="file-preprocessing_text-py-LC13"><span class="k">print</span> <span class="n">pos_tagged_sentences</span></div><div class="line" id="file-preprocessing_text-py-LC14"><span class="p">[[(</span><span class="s">'What'</span><span class="p">,</span> <span class="s">'What'</span><span class="p">,</span> <span class="p">[</span><span class="s">'WP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'can'</span><span class="p">,</span> <span class="s">'can'</span><span class="p">,</span> <span class="p">[</span><span class="s">'MD'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'say'</span><span class="p">,</span> <span class="s">'say'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'about'</span><span class="p">,</span> <span class="s">'about'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'this'</span><span class="p">,</span> <span class="s">'this'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'place'</span><span class="p">,</span> <span class="s">'place'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span> <span class="p">[(</span><span class="s">'The'</span><span class="p">,</span> <span class="s">'The'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'staff'</span><span class="p">,</span> <span class="s">'staff'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'of'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'restaurant'</span><span class="p">,</span> <span class="s">'restaurant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'nice'</span><span class="p">,</span> <span class="s">'nice'</span><span class="p">,</span> <span class="p">[</span><span class="s">'JJ'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'eggplant'</span><span class="p">,</span> <span class="s">'eggplant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'not'</span><span class="p">,</span> <span class="s">'not'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'bad'</span><span class="p">,</span> <span class="s">'bad'</span><span class="p">,</span> <span class="p">[</span><span class="s">'JJ'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span> <span class="p">[(</span><span class="s">'apart'</span><span class="p">,</span> <span class="s">'apart'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'from'</span><span class="p">,</span> <span class="s">'from'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'that'</span><span class="p">,</span> <span class="s">'that'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span> <span class="p">(</span><span class="s">'very'</span><span class="p">,</span> <span class="s">'very'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'uninspired'</span><span class="p">,</span> <span class="s">'uninspired'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'food'</span><span class="p">,</span> <span class="s">'food'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span> <span class="p">(</span><span class="s">'lack'</span><span class="p">,</span> <span class="s">'lack'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'of'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'atmosphere'</span><span class="p">,</span> <span class="s">'atmosphere'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'too'</span><span class="p">,</span> <span class="s">'too'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'expensive'</span><span class="p">,</span> <span class="s">'expensive'</span><span class="p">,</span> <span class="p">[</span><span class="s">'JJ'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span> <span class="p">[(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'am'</span><span class="p">,</span> <span class="s">'am'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'staunch'</span><span class="p">,</span> <span class="s">'staunch'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'vegetarian'</span><span class="p">,</span> <span class="s">'vegetarian'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'was'</span><span class="p">,</span> <span class="s">'was'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBD'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'sorely'</span><span class="p">,</span> <span class="s">'sorely'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'dissapointed'</span><span class="p">,</span> <span class="s">'dissapointed'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'with'</span><span class="p">,</span> <span class="s">'with'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'veggie'</span><span class="p">,</span> <span class="s">'veggie'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'options'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNS'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'on'</span><span class="p">,</span> <span class="s">'on'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'menu'</span><span class="p">,</span> <span class="s">'menu'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span> <span class="p">[(</span><span class="s">'Will'</span><span class="p">,</span> <span class="s">'Will'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'be'</span><span class="p">,</span> <span class="s">'be'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'last'</span><span class="p">,</span> <span class="s">'last'</span><span class="p">,</span> <span class="p">[</span><span class="s">'JJ'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'time'</span><span class="p">,</span> <span class="s">'time'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'visit'</span><span class="p">,</span> <span class="s">'visit'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span> <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'recommend'</span><span class="p">,</span> <span class="s">'recommend'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'others'</span><span class="p">,</span> <span class="s">'others'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNS'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'to'</span><span class="p">,</span> <span class="s">'to'</span><span class="p">,</span> <span class="p">[</span><span class="s">'TO'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'avoid'</span><span class="p">,</span> <span class="s">'avoid'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span> <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])]]</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3968990/raw/preprocessing_text.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3968990#file-preprocessing_text-py">preprocessing_text.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        </div>
<div class="section" id="defining-a-dictionary-of-positive-and-negative-expressions">
<h2>Defining a dictionary of positive and negative expressions</h2>
<p>The next step is to recognize positive and negative expressions. To achieve this, I'm going to use dictionaries, i.e. simple files containing expressions that will be searched in our text.</p>
<p>For example, I'm going to define two tiny dictionaries, one for positive expressions and other for negative ones:</p>
<p><strong>positive.yml</strong></p>
<div class="highlight"><pre><span class="l-Scalar-Plain">nice</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">positive</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">awesome</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">positive</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">cool</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">positive</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">superb</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">positive</span><span class="p-Indicator">]</span>
</pre></div>
<p><strong>negative.yml</strong></p>
<div class="highlight"><pre><span class="l-Scalar-Plain">bad</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">negative</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">uninspired</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">negative</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">expensive</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">negative</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">dissapointed</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">negative</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">recommend others to avoid</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">negative</span><span class="p-Indicator">]</span>
</pre></div>
<p>In case you were wondering, we could have used a simpler format, or used only one file, but this dictionary format will be useful later.</p>
<p>Note that these are only two example dictionaries, useless in a real life project.</p>
</div>
<div class="section" id="tagging-the-text-with-dictionaries">
<h2>Tagging the text with dictionaries</h2>
<p>The following code defines a class that I will use to tag our pre-processed text with our just defined dictionaries.</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969016.js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969016" class="gist"><center class="ivtweumhmneoqbwjlmsgmffa yhmemvquflujsnfsvlekjxup" data-type="a" style="display: block; padding: 10px 0px; margin: 0px 0px 18px; text-align: center; height: 120px; overflow: visible; width: 740px; float: none; box-sizing: content-box; letter-spacing: normal;"><iframe src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/saved_resource.htm" width="728" height="90" style="width: 728px; height: 90px; box-sizing: content-box; display: none !important; visibility: visible; margin: 0px; float: none;" marginheight="0" marginwidth="0" frameborder="0" scrolling="no"></iframe><center class="gpl-dis-diswrap" style="padding:0;margin-top:-5px;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><div class="gpl-dis-firstl" style="color:#000; background-color: transparent; width:728px;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;text-align:right; padding: 2px 3px;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><a href="http://advertising-support.com/why.php?type=3&zone=287609&pid=1649&ext=Browser%20AdBlocker" style="color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;" target="_blank">Ad by Browser AdBlocker</a> | <a href="http://fjavieralba.com/basic-sentiment-analysis-with-python.html#" class="gpl-dis-hide" style="text-transform:none;font-weight:normal;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;">Close This Ad</a></div></center></center>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-dictionary_tagger-py-L1" rel="file-dictionary_tagger-py-L1">1</span>
            <span class="line-number" id="file-dictionary_tagger-py-L2" rel="file-dictionary_tagger-py-L2">2</span>
            <span class="line-number" id="file-dictionary_tagger-py-L3" rel="file-dictionary_tagger-py-L3">3</span>
            <span class="line-number" id="file-dictionary_tagger-py-L4" rel="file-dictionary_tagger-py-L4">4</span>
            <span class="line-number" id="file-dictionary_tagger-py-L5" rel="file-dictionary_tagger-py-L5">5</span>
            <span class="line-number" id="file-dictionary_tagger-py-L6" rel="file-dictionary_tagger-py-L6">6</span>
            <span class="line-number" id="file-dictionary_tagger-py-L7" rel="file-dictionary_tagger-py-L7">7</span>
            <span class="line-number" id="file-dictionary_tagger-py-L8" rel="file-dictionary_tagger-py-L8">8</span>
            <span class="line-number" id="file-dictionary_tagger-py-L9" rel="file-dictionary_tagger-py-L9">9</span>
            <span class="line-number" id="file-dictionary_tagger-py-L10" rel="file-dictionary_tagger-py-L10">10</span>
            <span class="line-number" id="file-dictionary_tagger-py-L11" rel="file-dictionary_tagger-py-L11">11</span>
            <span class="line-number" id="file-dictionary_tagger-py-L12" rel="file-dictionary_tagger-py-L12">12</span>
            <span class="line-number" id="file-dictionary_tagger-py-L13" rel="file-dictionary_tagger-py-L13">13</span>
            <span class="line-number" id="file-dictionary_tagger-py-L14" rel="file-dictionary_tagger-py-L14">14</span>
            <span class="line-number" id="file-dictionary_tagger-py-L15" rel="file-dictionary_tagger-py-L15">15</span>
            <span class="line-number" id="file-dictionary_tagger-py-L16" rel="file-dictionary_tagger-py-L16">16</span>
            <span class="line-number" id="file-dictionary_tagger-py-L17" rel="file-dictionary_tagger-py-L17">17</span>
            <span class="line-number" id="file-dictionary_tagger-py-L18" rel="file-dictionary_tagger-py-L18">18</span>
            <span class="line-number" id="file-dictionary_tagger-py-L19" rel="file-dictionary_tagger-py-L19">19</span>
            <span class="line-number" id="file-dictionary_tagger-py-L20" rel="file-dictionary_tagger-py-L20">20</span>
            <span class="line-number" id="file-dictionary_tagger-py-L21" rel="file-dictionary_tagger-py-L21">21</span>
            <span class="line-number" id="file-dictionary_tagger-py-L22" rel="file-dictionary_tagger-py-L22">22</span>
            <span class="line-number" id="file-dictionary_tagger-py-L23" rel="file-dictionary_tagger-py-L23">23</span>
            <span class="line-number" id="file-dictionary_tagger-py-L24" rel="file-dictionary_tagger-py-L24">24</span>
            <span class="line-number" id="file-dictionary_tagger-py-L25" rel="file-dictionary_tagger-py-L25">25</span>
            <span class="line-number" id="file-dictionary_tagger-py-L26" rel="file-dictionary_tagger-py-L26">26</span>
            <span class="line-number" id="file-dictionary_tagger-py-L27" rel="file-dictionary_tagger-py-L27">27</span>
            <span class="line-number" id="file-dictionary_tagger-py-L28" rel="file-dictionary_tagger-py-L28">28</span>
            <span class="line-number" id="file-dictionary_tagger-py-L29" rel="file-dictionary_tagger-py-L29">29</span>
            <span class="line-number" id="file-dictionary_tagger-py-L30" rel="file-dictionary_tagger-py-L30">30</span>
            <span class="line-number" id="file-dictionary_tagger-py-L31" rel="file-dictionary_tagger-py-L31">31</span>
            <span class="line-number" id="file-dictionary_tagger-py-L32" rel="file-dictionary_tagger-py-L32">32</span>
            <span class="line-number" id="file-dictionary_tagger-py-L33" rel="file-dictionary_tagger-py-L33">33</span>
            <span class="line-number" id="file-dictionary_tagger-py-L34" rel="file-dictionary_tagger-py-L34">34</span>
            <span class="line-number" id="file-dictionary_tagger-py-L35" rel="file-dictionary_tagger-py-L35">35</span>
            <span class="line-number" id="file-dictionary_tagger-py-L36" rel="file-dictionary_tagger-py-L36">36</span>
            <span class="line-number" id="file-dictionary_tagger-py-L37" rel="file-dictionary_tagger-py-L37">37</span>
            <span class="line-number" id="file-dictionary_tagger-py-L38" rel="file-dictionary_tagger-py-L38">38</span>
            <span class="line-number" id="file-dictionary_tagger-py-L39" rel="file-dictionary_tagger-py-L39">39</span>
            <span class="line-number" id="file-dictionary_tagger-py-L40" rel="file-dictionary_tagger-py-L40">40</span>
            <span class="line-number" id="file-dictionary_tagger-py-L41" rel="file-dictionary_tagger-py-L41">41</span>
            <span class="line-number" id="file-dictionary_tagger-py-L42" rel="file-dictionary_tagger-py-L42">42</span>
            <span class="line-number" id="file-dictionary_tagger-py-L43" rel="file-dictionary_tagger-py-L43">43</span>
            <span class="line-number" id="file-dictionary_tagger-py-L44" rel="file-dictionary_tagger-py-L44">44</span>
            <span class="line-number" id="file-dictionary_tagger-py-L45" rel="file-dictionary_tagger-py-L45">45</span>
            <span class="line-number" id="file-dictionary_tagger-py-L46" rel="file-dictionary_tagger-py-L46">46</span>
            <span class="line-number" id="file-dictionary_tagger-py-L47" rel="file-dictionary_tagger-py-L47">47</span>
            <span class="line-number" id="file-dictionary_tagger-py-L48" rel="file-dictionary_tagger-py-L48">48</span>
            <span class="line-number" id="file-dictionary_tagger-py-L49" rel="file-dictionary_tagger-py-L49">49</span>
            <span class="line-number" id="file-dictionary_tagger-py-L50" rel="file-dictionary_tagger-py-L50">50</span>
            <span class="line-number" id="file-dictionary_tagger-py-L51" rel="file-dictionary_tagger-py-L51">51</span>
            <span class="line-number" id="file-dictionary_tagger-py-L52" rel="file-dictionary_tagger-py-L52">52</span>
            <span class="line-number" id="file-dictionary_tagger-py-L53" rel="file-dictionary_tagger-py-L53">53</span>
            <span class="line-number" id="file-dictionary_tagger-py-L54" rel="file-dictionary_tagger-py-L54">54</span>
            <span class="line-number" id="file-dictionary_tagger-py-L55" rel="file-dictionary_tagger-py-L55">55</span>
            <span class="line-number" id="file-dictionary_tagger-py-L56" rel="file-dictionary_tagger-py-L56">56</span>
            <span class="line-number" id="file-dictionary_tagger-py-L57" rel="file-dictionary_tagger-py-L57">57</span>
            <span class="line-number" id="file-dictionary_tagger-py-L58" rel="file-dictionary_tagger-py-L58">58</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-dictionary_tagger-py-LC1"><span class="k">class</span> <span class="nc">DictionaryTagger</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span></div><div class="line" id="file-dictionary_tagger-py-LC2">    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dictionary_paths</span><span class="p">):</span></div><div class="line" id="file-dictionary_tagger-py-LC3">        <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">dictionary_paths</span><span class="p">]</span></div><div class="line" id="file-dictionary_tagger-py-LC4">        <span class="n">dictionaries</span> <span class="o">=</span> <span class="p">[</span><span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">dict_file</span><span class="p">)</span> <span class="k">for</span> <span class="n">dict_file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span></div><div class="line" id="file-dictionary_tagger-py-LC5">        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">close</span><span class="p">(),</span> <span class="n">files</span><span class="p">)</span></div><div class="line" id="file-dictionary_tagger-py-LC6">        <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span> <span class="o">=</span> <span class="p">{}</span></div><div class="line" id="file-dictionary_tagger-py-LC7">        <span class="bp">self</span><span class="o">.</span><span class="n">max_key_size</span> <span class="o">=</span> <span class="mi">0</span></div><div class="line" id="file-dictionary_tagger-py-LC8">        <span class="k">for</span> <span class="n">curr_dict</span> <span class="ow">in</span> <span class="n">dictionaries</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC9">            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">curr_dict</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC10">                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC11">                    <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">curr_dict</span><span class="p">[</span><span class="n">key</span><span class="p">])</span></div><div class="line" id="file-dictionary_tagger-py-LC12">                <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC13">                    <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">curr_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span></div><div class="line" id="file-dictionary_tagger-py-LC14">                    <span class="bp">self</span><span class="o">.</span><span class="n">max_key_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_key_size</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">key</span><span class="p">))</span></div><div class="line" id="file-dictionary_tagger-py-LC15">&nbsp;</div><div class="line" id="file-dictionary_tagger-py-LC16">    <span class="k">def</span> <span class="nf">tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">postagged_sentences</span><span class="p">):</span></div><div class="line" id="file-dictionary_tagger-py-LC17">        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">tag_sentence</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">postagged_sentences</span><span class="p">]</span></div><div class="line" id="file-dictionary_tagger-py-LC18">&nbsp;</div><div class="line" id="file-dictionary_tagger-py-LC19">    <span class="k">def</span> <span class="nf">tag_sentence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sentence</span><span class="p">,</span> <span class="n">tag_with_lemmas</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span></div><div class="line" id="file-dictionary_tagger-py-LC20">        <span class="sd">"""</span></div><div class="line" id="file-dictionary_tagger-py-LC21"><span class="sd">        the result is only one tagging of all the possible ones.</span></div><div class="line" id="file-dictionary_tagger-py-LC22"><span class="sd">        The resulting tagging is determined by these two priority rules:</span></div><div class="line" id="file-dictionary_tagger-py-LC23"><span class="sd">            - longest matches have higher priority</span></div><div class="line" id="file-dictionary_tagger-py-LC24"><span class="sd">            - search is made from left to right</span></div><div class="line" id="file-dictionary_tagger-py-LC25"><span class="sd">        """</span></div><div class="line" id="file-dictionary_tagger-py-LC26">        <span class="n">tag_sentence</span> <span class="o">=</span> <span class="p">[]</span></div><div class="line" id="file-dictionary_tagger-py-LC27">        <span class="n">N</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sentence</span><span class="p">)</span></div><div class="line" id="file-dictionary_tagger-py-LC28">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_key_size</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC29">            <span class="bp">self</span><span class="o">.</span><span class="n">max_key_size</span> <span class="o">=</span> <span class="n">N</span></div><div class="line" id="file-dictionary_tagger-py-LC30">        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span></div><div class="line" id="file-dictionary_tagger-py-LC31">        <span class="k">while</span> <span class="p">(</span><span class="n">i</span> <span class="o">&lt;</span> <span class="n">N</span><span class="p">):</span></div><div class="line" id="file-dictionary_tagger-py-LC32">            <span class="n">j</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_key_size</span><span class="p">,</span> <span class="n">N</span><span class="p">)</span> <span class="c">#avoid overflow</span></div><div class="line" id="file-dictionary_tagger-py-LC33">            <span class="n">tagged</span> <span class="o">=</span> <span class="bp">False</span></div><div class="line" id="file-dictionary_tagger-py-LC34">            <span class="k">while</span> <span class="p">(</span><span class="n">j</span> <span class="o">&gt;</span> <span class="n">i</span><span class="p">):</span></div><div class="line" id="file-dictionary_tagger-py-LC35">                <span class="n">expression_form</span> <span class="o">=</span> <span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sentence</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]])</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div><div class="line" id="file-dictionary_tagger-py-LC36">                <span class="n">expression_lemma</span> <span class="o">=</span> <span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">sentence</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">j</span><span class="p">]])</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span></div><div class="line" id="file-dictionary_tagger-py-LC37">                <span class="k">if</span> <span class="n">tag_with_lemmas</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC38">                    <span class="n">literal</span> <span class="o">=</span> <span class="n">expression_lemma</span></div><div class="line" id="file-dictionary_tagger-py-LC39">                <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC40">                    <span class="n">literal</span> <span class="o">=</span> <span class="n">expression_form</span></div><div class="line" id="file-dictionary_tagger-py-LC41">                <span class="k">if</span> <span class="n">literal</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC42">                    <span class="c">#self.logger.debug("found: %s" % literal)</span></div><div class="line" id="file-dictionary_tagger-py-LC43">                    <span class="n">is_single_token</span> <span class="o">=</span> <span class="n">j</span> <span class="o">-</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span></div><div class="line" id="file-dictionary_tagger-py-LC44">                    <span class="n">original_position</span> <span class="o">=</span> <span class="n">i</span></div><div class="line" id="file-dictionary_tagger-py-LC45">                    <span class="n">i</span> <span class="o">=</span> <span class="n">j</span></div><div class="line" id="file-dictionary_tagger-py-LC46">                    <span class="n">taggings</span> <span class="o">=</span> <span class="p">[</span><span class="n">tag</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">[</span><span class="n">literal</span><span class="p">]]</span></div><div class="line" id="file-dictionary_tagger-py-LC47">                    <span class="n">tagged_expression</span> <span class="o">=</span> <span class="p">(</span><span class="n">expression_form</span><span class="p">,</span> <span class="n">expression_lemma</span><span class="p">,</span> <span class="n">taggings</span><span class="p">)</span></div><div class="line" id="file-dictionary_tagger-py-LC48">                    <span class="k">if</span> <span class="n">is_single_token</span><span class="p">:</span> <span class="c">#if the tagged literal is a single token, conserve its previous taggings:</span></div><div class="line" id="file-dictionary_tagger-py-LC49">                        <span class="n">original_token_tagging</span> <span class="o">=</span> <span class="n">sentence</span><span class="p">[</span><span class="n">original_position</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span></div><div class="line" id="file-dictionary_tagger-py-LC50">                        <span class="n">tagged_expression</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">original_token_tagging</span><span class="p">)</span></div><div class="line" id="file-dictionary_tagger-py-LC51">                    <span class="n">tag_sentence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tagged_expression</span><span class="p">)</span></div><div class="line" id="file-dictionary_tagger-py-LC52">                    <span class="n">tagged</span> <span class="o">=</span> <span class="bp">True</span></div><div class="line" id="file-dictionary_tagger-py-LC53">                <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC54">                    <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span></div><div class="line" id="file-dictionary_tagger-py-LC55">            <span class="k">if</span> <span class="ow">not</span> <span class="n">tagged</span><span class="p">:</span></div><div class="line" id="file-dictionary_tagger-py-LC56">                <span class="n">tag_sentence</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sentence</span><span class="p">[</span><span class="n">i</span><span class="p">])</span></div><div class="line" id="file-dictionary_tagger-py-LC57">                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span></div><div class="line" id="file-dictionary_tagger-py-LC58">        <span class="k">return</span> <span class="n">tag_sentence</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969016/raw/dictionary_tagger.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969016#file-dictionary_tagger-py">dictionary_tagger.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>When tagging our review, the input is the previously preprocessed text, and the output is the same text, enriched with tags of type "positive" or "negative":</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969016(1).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969016" class="gist"><center class="ivtweumhmneoqbwjlmsgmffa yhmemvquflujsnfsvlekjxup" data-type="a" style="display: block; padding: 10px 0px; margin: 0px 0px 18px; text-align: center; height: 120px; overflow: visible; width: 740px; float: none; box-sizing: content-box; letter-spacing: normal;"><iframe src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/saved_resource.htm" width="728" height="90" style="width: 728px; height: 90px; box-sizing: content-box; display: none !important; visibility: visible; margin: 0px; float: none;" marginheight="0" marginwidth="0" frameborder="0" scrolling="no"></iframe><center class="gpl-dis-diswrap" style="padding:0;margin-top:-5px;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><div class="gpl-dis-firstl" style="color:#000; background-color: transparent; width:728px;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;text-align:right; padding: 2px 3px;box-sizing:border-box;-moz-box-sizing:border-box;display:block;"><a href="http://advertising-support.com/why.php?type=3&zone=287609&pid=1649&ext=Browser%20AdBlocker" style="color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;" target="_blank">Ad by Browser AdBlocker</a> | <a href="http://fjavieralba.com/basic-sentiment-analysis-with-python.html#" class="gpl-dis-hide" style="text-transform:none;font-weight:normal;color:#000;font:normal normal normal 11px/16px Arial, Helvetica, Utkal, sans-serif;display:inline;">Close This Ad</a></div></center></center>
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-tagging_positive_negative-py-L1" rel="file-tagging_positive_negative-py-L1">1</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L2" rel="file-tagging_positive_negative-py-L2">2</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L3" rel="file-tagging_positive_negative-py-L3">3</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L4" rel="file-tagging_positive_negative-py-L4">4</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L5" rel="file-tagging_positive_negative-py-L5">5</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L6" rel="file-tagging_positive_negative-py-L6">6</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L7" rel="file-tagging_positive_negative-py-L7">7</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L8" rel="file-tagging_positive_negative-py-L8">8</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L9" rel="file-tagging_positive_negative-py-L9">9</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L10" rel="file-tagging_positive_negative-py-L10">10</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L11" rel="file-tagging_positive_negative-py-L11">11</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L12" rel="file-tagging_positive_negative-py-L12">12</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L13" rel="file-tagging_positive_negative-py-L13">13</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L14" rel="file-tagging_positive_negative-py-L14">14</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L15" rel="file-tagging_positive_negative-py-L15">15</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L16" rel="file-tagging_positive_negative-py-L16">16</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L17" rel="file-tagging_positive_negative-py-L17">17</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L18" rel="file-tagging_positive_negative-py-L18">18</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L19" rel="file-tagging_positive_negative-py-L19">19</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L20" rel="file-tagging_positive_negative-py-L20">20</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L21" rel="file-tagging_positive_negative-py-L21">21</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L22" rel="file-tagging_positive_negative-py-L22">22</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L23" rel="file-tagging_positive_negative-py-L23">23</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L24" rel="file-tagging_positive_negative-py-L24">24</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L25" rel="file-tagging_positive_negative-py-L25">25</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L26" rel="file-tagging_positive_negative-py-L26">26</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L27" rel="file-tagging_positive_negative-py-L27">27</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L28" rel="file-tagging_positive_negative-py-L28">28</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L29" rel="file-tagging_positive_negative-py-L29">29</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L30" rel="file-tagging_positive_negative-py-L30">30</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L31" rel="file-tagging_positive_negative-py-L31">31</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L32" rel="file-tagging_positive_negative-py-L32">32</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L33" rel="file-tagging_positive_negative-py-L33">33</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L34" rel="file-tagging_positive_negative-py-L34">34</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L35" rel="file-tagging_positive_negative-py-L35">35</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L36" rel="file-tagging_positive_negative-py-L36">36</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L37" rel="file-tagging_positive_negative-py-L37">37</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L38" rel="file-tagging_positive_negative-py-L38">38</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L39" rel="file-tagging_positive_negative-py-L39">39</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L40" rel="file-tagging_positive_negative-py-L40">40</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L41" rel="file-tagging_positive_negative-py-L41">41</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L42" rel="file-tagging_positive_negative-py-L42">42</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L43" rel="file-tagging_positive_negative-py-L43">43</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L44" rel="file-tagging_positive_negative-py-L44">44</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L45" rel="file-tagging_positive_negative-py-L45">45</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L46" rel="file-tagging_positive_negative-py-L46">46</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L47" rel="file-tagging_positive_negative-py-L47">47</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L48" rel="file-tagging_positive_negative-py-L48">48</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L49" rel="file-tagging_positive_negative-py-L49">49</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L50" rel="file-tagging_positive_negative-py-L50">50</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L51" rel="file-tagging_positive_negative-py-L51">51</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L52" rel="file-tagging_positive_negative-py-L52">52</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L53" rel="file-tagging_positive_negative-py-L53">53</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L54" rel="file-tagging_positive_negative-py-L54">54</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L55" rel="file-tagging_positive_negative-py-L55">55</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L56" rel="file-tagging_positive_negative-py-L56">56</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L57" rel="file-tagging_positive_negative-py-L57">57</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L58" rel="file-tagging_positive_negative-py-L58">58</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L59" rel="file-tagging_positive_negative-py-L59">59</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L60" rel="file-tagging_positive_negative-py-L60">60</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L61" rel="file-tagging_positive_negative-py-L61">61</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L62" rel="file-tagging_positive_negative-py-L62">62</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L63" rel="file-tagging_positive_negative-py-L63">63</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L64" rel="file-tagging_positive_negative-py-L64">64</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L65" rel="file-tagging_positive_negative-py-L65">65</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L66" rel="file-tagging_positive_negative-py-L66">66</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L67" rel="file-tagging_positive_negative-py-L67">67</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L68" rel="file-tagging_positive_negative-py-L68">68</span>
            <span class="line-number" id="file-tagging_positive_negative-py-L69" rel="file-tagging_positive_negative-py-L69">69</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-tagging_positive_negative-py-LC1"><span class="n">dicttagger</span> <span class="o">=</span> <span class="n">DictionaryTagger</span><span class="p">([</span> <span class="s">'dicts/positive.yml'</span><span class="p">,</span> <span class="s">'dicts/negative.yml'</span><span class="p">])</span></div><div class="line" id="file-tagging_positive_negative-py-LC2">&nbsp;</div><div class="line" id="file-tagging_positive_negative-py-LC3"><span class="n">dict_tagged_sentences</span> <span class="o">=</span> <span class="n">dicttagger</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">pos_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-tagging_positive_negative-py-LC4">&nbsp;</div><div class="line" id="file-tagging_positive_negative-py-LC5"><span class="n">pprint</span><span class="p">(</span><span class="n">dict_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-tagging_positive_negative-py-LC6"><span class="p">[[(</span><span class="s">'What'</span><span class="p">,</span> <span class="s">'What'</span><span class="p">,</span> <span class="p">[</span><span class="s">'WP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC7">  <span class="p">(</span><span class="s">'can'</span><span class="p">,</span> <span class="s">'can'</span><span class="p">,</span> <span class="p">[</span><span class="s">'MD'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC8">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC9">  <span class="p">(</span><span class="s">'say'</span><span class="p">,</span> <span class="s">'say'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC10">  <span class="p">(</span><span class="s">'about'</span><span class="p">,</span> <span class="s">'about'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC11">  <span class="p">(</span><span class="s">'this'</span><span class="p">,</span> <span class="s">'this'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC12">  <span class="p">(</span><span class="s">'place'</span><span class="p">,</span> <span class="s">'place'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC13">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_positive_negative-py-LC14"> <span class="p">[(</span><span class="s">'The'</span><span class="p">,</span> <span class="s">'The'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC15">  <span class="p">(</span><span class="s">'staff'</span><span class="p">,</span> <span class="s">'staff'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC16">  <span class="p">(</span><span class="s">'of'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC17">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC18">  <span class="p">(</span><span class="s">'restaurant'</span><span class="p">,</span> <span class="s">'restaurant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC19">  <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC20">  <span class="p">(</span><span class="s">'nice'</span><span class="p">,</span> <span class="s">'nice'</span><span class="p">,</span> <span class="p">[</span><span class="s">'positive'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC21">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC22">  <span class="p">(</span><span class="s">'eggplant'</span><span class="p">,</span> <span class="s">'eggplant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC23">  <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC24">  <span class="p">(</span><span class="s">'not'</span><span class="p">,</span> <span class="s">'not'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC25">  <span class="p">(</span><span class="s">'bad'</span><span class="p">,</span> <span class="s">'bad'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC26">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_positive_negative-py-LC27"> <span class="p">[(</span><span class="s">'apart'</span><span class="p">,</span> <span class="s">'apart'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC28">  <span class="p">(</span><span class="s">'from'</span><span class="p">,</span> <span class="s">'from'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC29">  <span class="p">(</span><span class="s">'that'</span><span class="p">,</span> <span class="s">'that'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC30">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC31">  <span class="p">(</span><span class="s">'very'</span><span class="p">,</span> <span class="s">'very'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC32">  <span class="p">(</span><span class="s">'uninspired'</span><span class="p">,</span> <span class="s">'uninspired'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'VBN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC33">  <span class="p">(</span><span class="s">'food'</span><span class="p">,</span> <span class="s">'food'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC34">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC35">  <span class="p">(</span><span class="s">'lack'</span><span class="p">,</span> <span class="s">'lack'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC36">  <span class="p">(</span><span class="s">'of'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC37">  <span class="p">(</span><span class="s">'atmosphere'</span><span class="p">,</span> <span class="s">'atmosphere'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC38">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC39">  <span class="p">(</span><span class="s">'too'</span><span class="p">,</span> <span class="s">'too'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC40">  <span class="p">(</span><span class="s">'expensive'</span><span class="p">,</span> <span class="s">'expensive'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC41">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_positive_negative-py-LC42"> <span class="p">[(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC43">  <span class="p">(</span><span class="s">'am'</span><span class="p">,</span> <span class="s">'am'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC44">  <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC45">  <span class="p">(</span><span class="s">'staunch'</span><span class="p">,</span> <span class="s">'staunch'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC46">  <span class="p">(</span><span class="s">'vegetarian'</span><span class="p">,</span> <span class="s">'vegetarian'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC47">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC48">  <span class="p">(</span><span class="s">'was'</span><span class="p">,</span> <span class="s">'was'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBD'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC49">  <span class="p">(</span><span class="s">'sorely'</span><span class="p">,</span> <span class="s">'sorely'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC50">  <span class="p">(</span><span class="s">'dissapointed'</span><span class="p">,</span> <span class="s">'dissapointed'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'VBN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC51">  <span class="p">(</span><span class="s">'with'</span><span class="p">,</span> <span class="s">'with'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC52">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC53">  <span class="p">(</span><span class="s">'veggie'</span><span class="p">,</span> <span class="s">'veggie'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC54">  <span class="p">(</span><span class="s">'options'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNS'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC55">  <span class="p">(</span><span class="s">'on'</span><span class="p">,</span> <span class="s">'on'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC56">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC57">  <span class="p">(</span><span class="s">'menu'</span><span class="p">,</span> <span class="s">'menu'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC58">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_positive_negative-py-LC59"> <span class="p">[(</span><span class="s">'Will'</span><span class="p">,</span> <span class="s">'Will'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC60">  <span class="p">(</span><span class="s">'be'</span><span class="p">,</span> <span class="s">'be'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC61">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC62">  <span class="p">(</span><span class="s">'last'</span><span class="p">,</span> <span class="s">'last'</span><span class="p">,</span> <span class="p">[</span><span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC63">  <span class="p">(</span><span class="s">'time'</span><span class="p">,</span> <span class="s">'time'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC64">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC65">  <span class="p">(</span><span class="s">'visit'</span><span class="p">,</span> <span class="s">'visit'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC66">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC67">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC68">  <span class="p">(</span><span class="s">'recommend others to avoid'</span><span class="p">,</span> <span class="s">'recommend others to avoid'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">]),</span></div><div class="line" id="file-tagging_positive_negative-py-LC69">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])]]</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969016/raw/tagging_positive_negative.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969016#file-tagging_positive_negative-py">tagging_positive_negative.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        </div>
<div class="section" id="a-simple-sentiment-measure">
<h2>A simple sentiment measure</h2>
<p>We could already perform a basic calculus of the positiveness or negativeness of a review.</p>
<p>Simply counting how many positive and negative expressions we detected, could be a (very naive) sentiment measure.</p>
<p>The following code snippet applies this idea:</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969825.js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969825" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-basic_sentiment_score-py-L1" rel="file-basic_sentiment_score-py-L1">1</span>
            <span class="line-number" id="file-basic_sentiment_score-py-L2" rel="file-basic_sentiment_score-py-L2">2</span>
            <span class="line-number" id="file-basic_sentiment_score-py-L3" rel="file-basic_sentiment_score-py-L3">3</span>
            <span class="line-number" id="file-basic_sentiment_score-py-L4" rel="file-basic_sentiment_score-py-L4">4</span>
            <span class="line-number" id="file-basic_sentiment_score-py-L5" rel="file-basic_sentiment_score-py-L5">5</span>
            <span class="line-number" id="file-basic_sentiment_score-py-L6" rel="file-basic_sentiment_score-py-L6">6</span>
            <span class="line-number" id="file-basic_sentiment_score-py-L7" rel="file-basic_sentiment_score-py-L7">7</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-basic_sentiment_score-py-LC1"><span class="k">def</span> <span class="nf">value_of</span><span class="p">(</span><span class="n">sentiment</span><span class="p">):</span></div><div class="line" id="file-basic_sentiment_score-py-LC2">    <span class="k">if</span> <span class="n">sentiment</span> <span class="o">==</span> <span class="s">'positive'</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span></div><div class="line" id="file-basic_sentiment_score-py-LC3">    <span class="k">if</span> <span class="n">sentiment</span> <span class="o">==</span> <span class="s">'negative'</span><span class="p">:</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span></div><div class="line" id="file-basic_sentiment_score-py-LC4">    <span class="k">return</span> <span class="mi">0</span></div><div class="line" id="file-basic_sentiment_score-py-LC5">&nbsp;</div><div class="line" id="file-basic_sentiment_score-py-LC6"><span class="k">def</span> <span class="nf">sentiment_score</span><span class="p">(</span><span class="n">review</span><span class="p">):</span>    </div><div class="line" id="file-basic_sentiment_score-py-LC7">    <span class="k">return</span> <span class="nb">sum</span> <span class="p">([</span><span class="n">value_of</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">dict_tagged_sentences</span> <span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">sentence</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">token</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969825/raw/basic_sentiment_score.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969825#file-basic_sentiment_score-py">basic_sentiment_score.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        
        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969825(1).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969825" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-example_exec_1-py-L1" rel="file-example_exec_1-py-L1">1</span>
            <span class="line-number" id="file-example_exec_1-py-L2" rel="file-example_exec_1-py-L2">2</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-example_exec_1-py-LC1"><span class="n">sentiment_score</span><span class="p">(</span><span class="n">dict_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-example_exec_1-py-LC2"><span class="o">-</span><span class="mi">4</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969825/raw/example_exec_1.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969825#file-example_exec_1-py">example_exec_1.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>So, our review could be considered "quite negative" since it has a score of -4</p>
</div>
<div class="section" id="incrementers-and-decrementers">
<h2>Incrementers and decrementers</h2>
<p>The previous "sentiment score" was very basic: it only counts positive and negative expressions and makes a sum, without taking into account that maybe some expressions are more positive or more negative than others.</p>
<p>A way of defining this "strength" could be using two new dictionaries. One for "incrementers" and another for "decrementers".</p>
<p>Let's define two tiny examples:</p>
<p><strong>inc.yml</strong></p>
<div class="highlight"><pre><span class="l-Scalar-Plain">too</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">inc</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">very</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">inc</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">sorely</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">inc</span><span class="p-Indicator">]</span>
</pre></div>
<p><strong>dec.yml</strong></p>
<div class="highlight"><pre><span class="l-Scalar-Plain">barely</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">dec</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">little</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">dec</span><span class="p-Indicator">]</span>
</pre></div>
<p>We instantiate again our tagger, telling it to use these two new dictionaries:</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969016(2).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969016" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-tagging_inc_dec-py-L1" rel="file-tagging_inc_dec-py-L1">1</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L2" rel="file-tagging_inc_dec-py-L2">2</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L3" rel="file-tagging_inc_dec-py-L3">3</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L4" rel="file-tagging_inc_dec-py-L4">4</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L5" rel="file-tagging_inc_dec-py-L5">5</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L6" rel="file-tagging_inc_dec-py-L6">6</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L7" rel="file-tagging_inc_dec-py-L7">7</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L8" rel="file-tagging_inc_dec-py-L8">8</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L9" rel="file-tagging_inc_dec-py-L9">9</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L10" rel="file-tagging_inc_dec-py-L10">10</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L11" rel="file-tagging_inc_dec-py-L11">11</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L12" rel="file-tagging_inc_dec-py-L12">12</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L13" rel="file-tagging_inc_dec-py-L13">13</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L14" rel="file-tagging_inc_dec-py-L14">14</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L15" rel="file-tagging_inc_dec-py-L15">15</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L16" rel="file-tagging_inc_dec-py-L16">16</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L17" rel="file-tagging_inc_dec-py-L17">17</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L18" rel="file-tagging_inc_dec-py-L18">18</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L19" rel="file-tagging_inc_dec-py-L19">19</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L20" rel="file-tagging_inc_dec-py-L20">20</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L21" rel="file-tagging_inc_dec-py-L21">21</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L22" rel="file-tagging_inc_dec-py-L22">22</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L23" rel="file-tagging_inc_dec-py-L23">23</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L24" rel="file-tagging_inc_dec-py-L24">24</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L25" rel="file-tagging_inc_dec-py-L25">25</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L26" rel="file-tagging_inc_dec-py-L26">26</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L27" rel="file-tagging_inc_dec-py-L27">27</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L28" rel="file-tagging_inc_dec-py-L28">28</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L29" rel="file-tagging_inc_dec-py-L29">29</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L30" rel="file-tagging_inc_dec-py-L30">30</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L31" rel="file-tagging_inc_dec-py-L31">31</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L32" rel="file-tagging_inc_dec-py-L32">32</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L33" rel="file-tagging_inc_dec-py-L33">33</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L34" rel="file-tagging_inc_dec-py-L34">34</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L35" rel="file-tagging_inc_dec-py-L35">35</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L36" rel="file-tagging_inc_dec-py-L36">36</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L37" rel="file-tagging_inc_dec-py-L37">37</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L38" rel="file-tagging_inc_dec-py-L38">38</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L39" rel="file-tagging_inc_dec-py-L39">39</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L40" rel="file-tagging_inc_dec-py-L40">40</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L41" rel="file-tagging_inc_dec-py-L41">41</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L42" rel="file-tagging_inc_dec-py-L42">42</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L43" rel="file-tagging_inc_dec-py-L43">43</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L44" rel="file-tagging_inc_dec-py-L44">44</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L45" rel="file-tagging_inc_dec-py-L45">45</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L46" rel="file-tagging_inc_dec-py-L46">46</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L47" rel="file-tagging_inc_dec-py-L47">47</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L48" rel="file-tagging_inc_dec-py-L48">48</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L49" rel="file-tagging_inc_dec-py-L49">49</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L50" rel="file-tagging_inc_dec-py-L50">50</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L51" rel="file-tagging_inc_dec-py-L51">51</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L52" rel="file-tagging_inc_dec-py-L52">52</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L53" rel="file-tagging_inc_dec-py-L53">53</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L54" rel="file-tagging_inc_dec-py-L54">54</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L55" rel="file-tagging_inc_dec-py-L55">55</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L56" rel="file-tagging_inc_dec-py-L56">56</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L57" rel="file-tagging_inc_dec-py-L57">57</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L58" rel="file-tagging_inc_dec-py-L58">58</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L59" rel="file-tagging_inc_dec-py-L59">59</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L60" rel="file-tagging_inc_dec-py-L60">60</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L61" rel="file-tagging_inc_dec-py-L61">61</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L62" rel="file-tagging_inc_dec-py-L62">62</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L63" rel="file-tagging_inc_dec-py-L63">63</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L64" rel="file-tagging_inc_dec-py-L64">64</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L65" rel="file-tagging_inc_dec-py-L65">65</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L66" rel="file-tagging_inc_dec-py-L66">66</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L67" rel="file-tagging_inc_dec-py-L67">67</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L68" rel="file-tagging_inc_dec-py-L68">68</span>
            <span class="line-number" id="file-tagging_inc_dec-py-L69" rel="file-tagging_inc_dec-py-L69">69</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-tagging_inc_dec-py-LC1"><span class="n">dicttagger</span> <span class="o">=</span> <span class="n">DictionaryTagger</span><span class="p">([</span> <span class="s">'dicts/positive.yml'</span><span class="p">,</span> <span class="s">'dicts/negative.yml'</span><span class="p">,</span> <span class="s">'dicts/inc.yml'</span><span class="p">,</span> <span class="s">'dicts/dec.yml'</span><span class="p">])</span></div><div class="line" id="file-tagging_inc_dec-py-LC2">&nbsp;</div><div class="line" id="file-tagging_inc_dec-py-LC3"><span class="n">dict_tagged_sentences</span> <span class="o">=</span> <span class="n">dicttagger</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">pos_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-tagging_inc_dec-py-LC4">&nbsp;</div><div class="line" id="file-tagging_inc_dec-py-LC5"><span class="n">pprint</span><span class="p">(</span><span class="n">dict_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-tagging_inc_dec-py-LC6"><span class="p">[[(</span><span class="s">'What'</span><span class="p">,</span> <span class="s">'What'</span><span class="p">,</span> <span class="p">[</span><span class="s">'WP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC7">  <span class="p">(</span><span class="s">'can'</span><span class="p">,</span> <span class="s">'can'</span><span class="p">,</span> <span class="p">[</span><span class="s">'MD'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC8">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC9">  <span class="p">(</span><span class="s">'say'</span><span class="p">,</span> <span class="s">'say'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC10">  <span class="p">(</span><span class="s">'about'</span><span class="p">,</span> <span class="s">'about'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC11">  <span class="p">(</span><span class="s">'this'</span><span class="p">,</span> <span class="s">'this'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC12">  <span class="p">(</span><span class="s">'place'</span><span class="p">,</span> <span class="s">'place'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC13">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inc_dec-py-LC14"> <span class="p">[(</span><span class="s">'The'</span><span class="p">,</span> <span class="s">'The'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC15">  <span class="p">(</span><span class="s">'staff'</span><span class="p">,</span> <span class="s">'staff'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC16">  <span class="p">(</span><span class="s">'of'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC17">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC18">  <span class="p">(</span><span class="s">'restaurant'</span><span class="p">,</span> <span class="s">'restaurant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC19">  <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC20">  <span class="p">(</span><span class="s">'nice'</span><span class="p">,</span> <span class="s">'nice'</span><span class="p">,</span> <span class="p">[</span><span class="s">'positive'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC21">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC22">  <span class="p">(</span><span class="s">'eggplant'</span><span class="p">,</span> <span class="s">'eggplant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC23">  <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC24">  <span class="p">(</span><span class="s">'not'</span><span class="p">,</span> <span class="s">'not'</span><span class="p">,</span> <span class="p">[</span><span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC25">  <span class="p">(</span><span class="s">'bad'</span><span class="p">,</span> <span class="s">'bad'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC26">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inc_dec-py-LC27"> <span class="p">[(</span><span class="s">'apart'</span><span class="p">,</span> <span class="s">'apart'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC28">  <span class="p">(</span><span class="s">'from'</span><span class="p">,</span> <span class="s">'from'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC29">  <span class="p">(</span><span class="s">'that'</span><span class="p">,</span> <span class="s">'that'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC30">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC31">  <span class="p">(</span><span class="s">'very'</span><span class="p">,</span> <span class="s">'very'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inc'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC32">  <span class="p">(</span><span class="s">'uninspired'</span><span class="p">,</span> <span class="s">'uninspired'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'VBN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC33">  <span class="p">(</span><span class="s">'food'</span><span class="p">,</span> <span class="s">'food'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC34">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC35">  <span class="p">(</span><span class="s">'lack'</span><span class="p">,</span> <span class="s">'lack'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC36">  <span class="p">(</span><span class="s">'of'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC37">  <span class="p">(</span><span class="s">'atmosphere'</span><span class="p">,</span> <span class="s">'atmosphere'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC38">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC39">  <span class="p">(</span><span class="s">'too'</span><span class="p">,</span> <span class="s">'too'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inc'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC40">  <span class="p">(</span><span class="s">'expensive'</span><span class="p">,</span> <span class="s">'expensive'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC41">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inc_dec-py-LC42"> <span class="p">[(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC43">  <span class="p">(</span><span class="s">'am'</span><span class="p">,</span> <span class="s">'am'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC44">  <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC45">  <span class="p">(</span><span class="s">'staunch'</span><span class="p">,</span> <span class="s">'staunch'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC46">  <span class="p">(</span><span class="s">'vegetarian'</span><span class="p">,</span> <span class="s">'vegetarian'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC47">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC48">  <span class="p">(</span><span class="s">'was'</span><span class="p">,</span> <span class="s">'was'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBD'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC49">  <span class="p">(</span><span class="s">'sorely'</span><span class="p">,</span> <span class="s">'sorely'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inc'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC50">  <span class="p">(</span><span class="s">'dissapointed'</span><span class="p">,</span> <span class="s">'dissapointed'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'VBN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC51">  <span class="p">(</span><span class="s">'with'</span><span class="p">,</span> <span class="s">'with'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC52">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC53">  <span class="p">(</span><span class="s">'veggie'</span><span class="p">,</span> <span class="s">'veggie'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC54">  <span class="p">(</span><span class="s">'options'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNS'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC55">  <span class="p">(</span><span class="s">'on'</span><span class="p">,</span> <span class="s">'on'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC56">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC57">  <span class="p">(</span><span class="s">'menu'</span><span class="p">,</span> <span class="s">'menu'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC58">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inc_dec-py-LC59"> <span class="p">[(</span><span class="s">'Will'</span><span class="p">,</span> <span class="s">'Will'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC60">  <span class="p">(</span><span class="s">'be'</span><span class="p">,</span> <span class="s">'be'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC61">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC62">  <span class="p">(</span><span class="s">'last'</span><span class="p">,</span> <span class="s">'last'</span><span class="p">,</span> <span class="p">[</span><span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC63">  <span class="p">(</span><span class="s">'time'</span><span class="p">,</span> <span class="s">'time'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC64">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC65">  <span class="p">(</span><span class="s">'visit'</span><span class="p">,</span> <span class="s">'visit'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC66">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC67">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC68">  <span class="p">(</span><span class="s">'recommend others to avoid'</span><span class="p">,</span> <span class="s">'recommend others to avoid'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inc_dec-py-LC69">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])]]</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969016/raw/tagging_inc_dec.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969016#file-tagging_inc_dec-py">tagging_inc_dec.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>Now, we could improve in some way our sentiment score. The idea is that "good" has more strength than "barely good" but less than "very good".</p>
<p>The following code defines the recursive function <tt class="docutils literal">sentence_score</tt> to compute the sentiment score of a sentence.
The most remarkable thing about it is that it uses information about the previous token to make a decision on the score of the current token.</p>
<p>This function is then used by our new <tt class="docutils literal">sentiment_score</tt> function:</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969825(2).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969825" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L1" rel="file-sentiment_score_inc_dec-py-L1">1</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L2" rel="file-sentiment_score_inc_dec-py-L2">2</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L3" rel="file-sentiment_score_inc_dec-py-L3">3</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L4" rel="file-sentiment_score_inc_dec-py-L4">4</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L5" rel="file-sentiment_score_inc_dec-py-L5">5</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L6" rel="file-sentiment_score_inc_dec-py-L6">6</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L7" rel="file-sentiment_score_inc_dec-py-L7">7</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L8" rel="file-sentiment_score_inc_dec-py-L8">8</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L9" rel="file-sentiment_score_inc_dec-py-L9">9</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L10" rel="file-sentiment_score_inc_dec-py-L10">10</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L11" rel="file-sentiment_score_inc_dec-py-L11">11</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L12" rel="file-sentiment_score_inc_dec-py-L12">12</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L13" rel="file-sentiment_score_inc_dec-py-L13">13</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L14" rel="file-sentiment_score_inc_dec-py-L14">14</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L15" rel="file-sentiment_score_inc_dec-py-L15">15</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L16" rel="file-sentiment_score_inc_dec-py-L16">16</span>
            <span class="line-number" id="file-sentiment_score_inc_dec-py-L17" rel="file-sentiment_score_inc_dec-py-L17">17</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-sentiment_score_inc_dec-py-LC1"><span class="k">def</span> <span class="nf">sentence_score</span><span class="p">(</span><span class="n">sentence_tokens</span><span class="p">,</span> <span class="n">previous_token</span><span class="p">,</span> <span class="n">acum_score</span><span class="p">):</span>    </div><div class="line" id="file-sentiment_score_inc_dec-py-LC2">    <span class="k">if</span> <span class="ow">not</span> <span class="n">sentence_tokens</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC3">        <span class="k">return</span> <span class="n">acum_score</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC4">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC5">        <span class="n">current_token</span> <span class="o">=</span> <span class="n">sentence_tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC6">        <span class="n">tags</span> <span class="o">=</span> <span class="n">current_token</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC7">        <span class="n">token_score</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">value_of</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">])</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC8">        <span class="k">if</span> <span class="n">previous_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC9">            <span class="n">previous_tags</span> <span class="o">=</span> <span class="n">previous_token</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC10">            <span class="k">if</span> <span class="s">'inc'</span> <span class="ow">in</span> <span class="n">previous_tags</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC11">                <span class="n">token_score</span> <span class="o">*=</span> <span class="mf">2.0</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC12">            <span class="k">elif</span> <span class="s">'dec'</span> <span class="ow">in</span> <span class="n">previous_tags</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC13">                <span class="n">token_score</span> <span class="o">/=</span> <span class="mf">2.0</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC14">        <span class="k">return</span> <span class="n">sentence_score</span><span class="p">(</span><span class="n">sentence_tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">current_token</span><span class="p">,</span> <span class="n">acum_score</span> <span class="o">+</span> <span class="n">token_score</span><span class="p">)</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC15">&nbsp;</div><div class="line" id="file-sentiment_score_inc_dec-py-LC16"><span class="k">def</span> <span class="nf">sentiment_score</span><span class="p">(</span><span class="n">review</span><span class="p">):</span></div><div class="line" id="file-sentiment_score_inc_dec-py-LC17">    <span class="k">return</span> <span class="nb">sum</span><span class="p">([</span><span class="n">sentence_score</span><span class="p">(</span><span class="n">sentence</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">review</span><span class="p">])</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969825/raw/sentiment_score_inc_dec.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969825#file-sentiment_score_inc_dec-py">sentiment_score_inc_dec.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        
        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969825(3).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969825" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-example_exec_2-py-L1" rel="file-example_exec_2-py-L1">1</span>
            <span class="line-number" id="file-example_exec_2-py-L2" rel="file-example_exec_2-py-L2">2</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-example_exec_2-py-LC1"><span class="n">sentiment_score</span><span class="p">(</span><span class="n">dict_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-example_exec_2-py-LC2"><span class="o">-</span><span class="mf">7.0</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969825/raw/example_exec_2.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969825#file-example_exec_2-py">example_exec_2.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>Notice that the review is now considered more negative, due to the appearance of expressions such as "very uninspired", "too expensive" and "sorely dissapointed".</p>
</div>
<div class="section" id="inverters-and-polarity-flips">
<h2>Inverters and polarity flips</h2>
<p>With the approach we've been following so far, some expressions could be incorrectly tagged.
For example, this part of our example review:</p>
<blockquote>
<em>the eggplant is not bad</em></blockquote>
<p>contains the word <em>bad</em> but the sentence is a positive opinion about the eggplant.</p>
<p>This is because the appearance of the negation word <em>not</em>, that flips the meaning of the negative adjective <em>bad</em>.</p>
<p>We could take into account these types of polarity flips defining a dictionary of inverters:</p>
<p><strong>inv.yml</strong></p>
<div class="highlight"><pre><span class="l-Scalar-Plain">lack of</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">inv</span><span class="p-Indicator">]</span>
<span class="l-Scalar-Plain">not</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">inv</span><span class="p-Indicator">]</span>
</pre></div>
<p>When tagging our text, we should also specify this new dictionary in the instantiation of our tagger:</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969016(3).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969016" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-tagging_inverters-py-L1" rel="file-tagging_inverters-py-L1">1</span>
            <span class="line-number" id="file-tagging_inverters-py-L2" rel="file-tagging_inverters-py-L2">2</span>
            <span class="line-number" id="file-tagging_inverters-py-L3" rel="file-tagging_inverters-py-L3">3</span>
            <span class="line-number" id="file-tagging_inverters-py-L4" rel="file-tagging_inverters-py-L4">4</span>
            <span class="line-number" id="file-tagging_inverters-py-L5" rel="file-tagging_inverters-py-L5">5</span>
            <span class="line-number" id="file-tagging_inverters-py-L6" rel="file-tagging_inverters-py-L6">6</span>
            <span class="line-number" id="file-tagging_inverters-py-L7" rel="file-tagging_inverters-py-L7">7</span>
            <span class="line-number" id="file-tagging_inverters-py-L8" rel="file-tagging_inverters-py-L8">8</span>
            <span class="line-number" id="file-tagging_inverters-py-L9" rel="file-tagging_inverters-py-L9">9</span>
            <span class="line-number" id="file-tagging_inverters-py-L10" rel="file-tagging_inverters-py-L10">10</span>
            <span class="line-number" id="file-tagging_inverters-py-L11" rel="file-tagging_inverters-py-L11">11</span>
            <span class="line-number" id="file-tagging_inverters-py-L12" rel="file-tagging_inverters-py-L12">12</span>
            <span class="line-number" id="file-tagging_inverters-py-L13" rel="file-tagging_inverters-py-L13">13</span>
            <span class="line-number" id="file-tagging_inverters-py-L14" rel="file-tagging_inverters-py-L14">14</span>
            <span class="line-number" id="file-tagging_inverters-py-L15" rel="file-tagging_inverters-py-L15">15</span>
            <span class="line-number" id="file-tagging_inverters-py-L16" rel="file-tagging_inverters-py-L16">16</span>
            <span class="line-number" id="file-tagging_inverters-py-L17" rel="file-tagging_inverters-py-L17">17</span>
            <span class="line-number" id="file-tagging_inverters-py-L18" rel="file-tagging_inverters-py-L18">18</span>
            <span class="line-number" id="file-tagging_inverters-py-L19" rel="file-tagging_inverters-py-L19">19</span>
            <span class="line-number" id="file-tagging_inverters-py-L20" rel="file-tagging_inverters-py-L20">20</span>
            <span class="line-number" id="file-tagging_inverters-py-L21" rel="file-tagging_inverters-py-L21">21</span>
            <span class="line-number" id="file-tagging_inverters-py-L22" rel="file-tagging_inverters-py-L22">22</span>
            <span class="line-number" id="file-tagging_inverters-py-L23" rel="file-tagging_inverters-py-L23">23</span>
            <span class="line-number" id="file-tagging_inverters-py-L24" rel="file-tagging_inverters-py-L24">24</span>
            <span class="line-number" id="file-tagging_inverters-py-L25" rel="file-tagging_inverters-py-L25">25</span>
            <span class="line-number" id="file-tagging_inverters-py-L26" rel="file-tagging_inverters-py-L26">26</span>
            <span class="line-number" id="file-tagging_inverters-py-L27" rel="file-tagging_inverters-py-L27">27</span>
            <span class="line-number" id="file-tagging_inverters-py-L28" rel="file-tagging_inverters-py-L28">28</span>
            <span class="line-number" id="file-tagging_inverters-py-L29" rel="file-tagging_inverters-py-L29">29</span>
            <span class="line-number" id="file-tagging_inverters-py-L30" rel="file-tagging_inverters-py-L30">30</span>
            <span class="line-number" id="file-tagging_inverters-py-L31" rel="file-tagging_inverters-py-L31">31</span>
            <span class="line-number" id="file-tagging_inverters-py-L32" rel="file-tagging_inverters-py-L32">32</span>
            <span class="line-number" id="file-tagging_inverters-py-L33" rel="file-tagging_inverters-py-L33">33</span>
            <span class="line-number" id="file-tagging_inverters-py-L34" rel="file-tagging_inverters-py-L34">34</span>
            <span class="line-number" id="file-tagging_inverters-py-L35" rel="file-tagging_inverters-py-L35">35</span>
            <span class="line-number" id="file-tagging_inverters-py-L36" rel="file-tagging_inverters-py-L36">36</span>
            <span class="line-number" id="file-tagging_inverters-py-L37" rel="file-tagging_inverters-py-L37">37</span>
            <span class="line-number" id="file-tagging_inverters-py-L38" rel="file-tagging_inverters-py-L38">38</span>
            <span class="line-number" id="file-tagging_inverters-py-L39" rel="file-tagging_inverters-py-L39">39</span>
            <span class="line-number" id="file-tagging_inverters-py-L40" rel="file-tagging_inverters-py-L40">40</span>
            <span class="line-number" id="file-tagging_inverters-py-L41" rel="file-tagging_inverters-py-L41">41</span>
            <span class="line-number" id="file-tagging_inverters-py-L42" rel="file-tagging_inverters-py-L42">42</span>
            <span class="line-number" id="file-tagging_inverters-py-L43" rel="file-tagging_inverters-py-L43">43</span>
            <span class="line-number" id="file-tagging_inverters-py-L44" rel="file-tagging_inverters-py-L44">44</span>
            <span class="line-number" id="file-tagging_inverters-py-L45" rel="file-tagging_inverters-py-L45">45</span>
            <span class="line-number" id="file-tagging_inverters-py-L46" rel="file-tagging_inverters-py-L46">46</span>
            <span class="line-number" id="file-tagging_inverters-py-L47" rel="file-tagging_inverters-py-L47">47</span>
            <span class="line-number" id="file-tagging_inverters-py-L48" rel="file-tagging_inverters-py-L48">48</span>
            <span class="line-number" id="file-tagging_inverters-py-L49" rel="file-tagging_inverters-py-L49">49</span>
            <span class="line-number" id="file-tagging_inverters-py-L50" rel="file-tagging_inverters-py-L50">50</span>
            <span class="line-number" id="file-tagging_inverters-py-L51" rel="file-tagging_inverters-py-L51">51</span>
            <span class="line-number" id="file-tagging_inverters-py-L52" rel="file-tagging_inverters-py-L52">52</span>
            <span class="line-number" id="file-tagging_inverters-py-L53" rel="file-tagging_inverters-py-L53">53</span>
            <span class="line-number" id="file-tagging_inverters-py-L54" rel="file-tagging_inverters-py-L54">54</span>
            <span class="line-number" id="file-tagging_inverters-py-L55" rel="file-tagging_inverters-py-L55">55</span>
            <span class="line-number" id="file-tagging_inverters-py-L56" rel="file-tagging_inverters-py-L56">56</span>
            <span class="line-number" id="file-tagging_inverters-py-L57" rel="file-tagging_inverters-py-L57">57</span>
            <span class="line-number" id="file-tagging_inverters-py-L58" rel="file-tagging_inverters-py-L58">58</span>
            <span class="line-number" id="file-tagging_inverters-py-L59" rel="file-tagging_inverters-py-L59">59</span>
            <span class="line-number" id="file-tagging_inverters-py-L60" rel="file-tagging_inverters-py-L60">60</span>
            <span class="line-number" id="file-tagging_inverters-py-L61" rel="file-tagging_inverters-py-L61">61</span>
            <span class="line-number" id="file-tagging_inverters-py-L62" rel="file-tagging_inverters-py-L62">62</span>
            <span class="line-number" id="file-tagging_inverters-py-L63" rel="file-tagging_inverters-py-L63">63</span>
            <span class="line-number" id="file-tagging_inverters-py-L64" rel="file-tagging_inverters-py-L64">64</span>
            <span class="line-number" id="file-tagging_inverters-py-L65" rel="file-tagging_inverters-py-L65">65</span>
            <span class="line-number" id="file-tagging_inverters-py-L66" rel="file-tagging_inverters-py-L66">66</span>
            <span class="line-number" id="file-tagging_inverters-py-L67" rel="file-tagging_inverters-py-L67">67</span>
            <span class="line-number" id="file-tagging_inverters-py-L68" rel="file-tagging_inverters-py-L68">68</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-tagging_inverters-py-LC1"><span class="n">dicttagger</span> <span class="o">=</span> <span class="n">DictionaryTagger</span><span class="p">([</span> <span class="s">'dicts/positive.yml'</span><span class="p">,</span> <span class="s">'dicts/negative.yml'</span><span class="p">,</span> <span class="s">'dicts/inc.yml'</span><span class="p">,</span> <span class="s">'dicts/dec.yml'</span><span class="p">,</span> <span class="s">'dicts/inv.yml'</span><span class="p">])</span></div><div class="line" id="file-tagging_inverters-py-LC2">&nbsp;</div><div class="line" id="file-tagging_inverters-py-LC3"><span class="n">dict_tagged_sentences</span> <span class="o">=</span> <span class="n">dicttagger</span><span class="o">.</span><span class="n">tag</span><span class="p">(</span><span class="n">pos_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-tagging_inverters-py-LC4">&nbsp;</div><div class="line" id="file-tagging_inverters-py-LC5"><span class="n">pprint</span><span class="p">(</span><span class="n">dict_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-tagging_inverters-py-LC6"><span class="p">[[(</span><span class="s">'What'</span><span class="p">,</span> <span class="s">'What'</span><span class="p">,</span> <span class="p">[</span><span class="s">'WP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC7">  <span class="p">(</span><span class="s">'can'</span><span class="p">,</span> <span class="s">'can'</span><span class="p">,</span> <span class="p">[</span><span class="s">'MD'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC8">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC9">  <span class="p">(</span><span class="s">'say'</span><span class="p">,</span> <span class="s">'say'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC10">  <span class="p">(</span><span class="s">'about'</span><span class="p">,</span> <span class="s">'about'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC11">  <span class="p">(</span><span class="s">'this'</span><span class="p">,</span> <span class="s">'this'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC12">  <span class="p">(</span><span class="s">'place'</span><span class="p">,</span> <span class="s">'place'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC13">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inverters-py-LC14"> <span class="p">[(</span><span class="s">'The'</span><span class="p">,</span> <span class="s">'The'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC15">  <span class="p">(</span><span class="s">'staff'</span><span class="p">,</span> <span class="s">'staff'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC16">  <span class="p">(</span><span class="s">'of'</span><span class="p">,</span> <span class="s">'of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC17">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC18">  <span class="p">(</span><span class="s">'restaurant'</span><span class="p">,</span> <span class="s">'restaurant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC19">  <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC20">  <span class="p">(</span><span class="s">'nice'</span><span class="p">,</span> <span class="s">'nice'</span><span class="p">,</span> <span class="p">[</span><span class="s">'positive'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC21">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC22">  <span class="p">(</span><span class="s">'eggplant'</span><span class="p">,</span> <span class="s">'eggplant'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC23">  <span class="p">(</span><span class="s">'is'</span><span class="p">,</span> <span class="s">'is'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBZ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC24">  <span class="p">(</span><span class="s">'not'</span><span class="p">,</span> <span class="s">'not'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inv'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC25">  <span class="p">(</span><span class="s">'bad'</span><span class="p">,</span> <span class="s">'bad'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC26">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inverters-py-LC27"> <span class="p">[(</span><span class="s">'apart'</span><span class="p">,</span> <span class="s">'apart'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC28">  <span class="p">(</span><span class="s">'from'</span><span class="p">,</span> <span class="s">'from'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC29">  <span class="p">(</span><span class="s">'that'</span><span class="p">,</span> <span class="s">'that'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC30">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC31">  <span class="p">(</span><span class="s">'very'</span><span class="p">,</span> <span class="s">'very'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inc'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC32">  <span class="p">(</span><span class="s">'uninspired'</span><span class="p">,</span> <span class="s">'uninspired'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'VBN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC33">  <span class="p">(</span><span class="s">'food'</span><span class="p">,</span> <span class="s">'food'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC34">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC35">  <span class="p">(</span><span class="s">'lack of'</span><span class="p">,</span> <span class="s">'lack of'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inv'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC36">  <span class="p">(</span><span class="s">'atmosphere'</span><span class="p">,</span> <span class="s">'atmosphere'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC37">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC38">  <span class="p">(</span><span class="s">'too'</span><span class="p">,</span> <span class="s">'too'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inc'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC39">  <span class="p">(</span><span class="s">'expensive'</span><span class="p">,</span> <span class="s">'expensive'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC40">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inverters-py-LC41"> <span class="p">[(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC42">  <span class="p">(</span><span class="s">'am'</span><span class="p">,</span> <span class="s">'am'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC43">  <span class="p">(</span><span class="s">'a'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC44">  <span class="p">(</span><span class="s">'staunch'</span><span class="p">,</span> <span class="s">'staunch'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC45">  <span class="p">(</span><span class="s">'vegetarian'</span><span class="p">,</span> <span class="s">'vegetarian'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC46">  <span class="p">(</span><span class="s">'and'</span><span class="p">,</span> <span class="s">'and'</span><span class="p">,</span> <span class="p">[</span><span class="s">'CC'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC47">  <span class="p">(</span><span class="s">'was'</span><span class="p">,</span> <span class="s">'was'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBD'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC48">  <span class="p">(</span><span class="s">'sorely'</span><span class="p">,</span> <span class="s">'sorely'</span><span class="p">,</span> <span class="p">[</span><span class="s">'inc'</span><span class="p">,</span> <span class="s">'RB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC49">  <span class="p">(</span><span class="s">'dissapointed'</span><span class="p">,</span> <span class="s">'dissapointed'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">,</span> <span class="s">'VBN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC50">  <span class="p">(</span><span class="s">'with'</span><span class="p">,</span> <span class="s">'with'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC51">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC52">  <span class="p">(</span><span class="s">'veggie'</span><span class="p">,</span> <span class="s">'veggie'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC53">  <span class="p">(</span><span class="s">'options'</span><span class="p">,</span> <span class="s">'options'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNS'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC54">  <span class="p">(</span><span class="s">'on'</span><span class="p">,</span> <span class="s">'on'</span><span class="p">,</span> <span class="p">[</span><span class="s">'IN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC55">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC56">  <span class="p">(</span><span class="s">'menu'</span><span class="p">,</span> <span class="s">'menu'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC57">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])],</span></div><div class="line" id="file-tagging_inverters-py-LC58"> <span class="p">[(</span><span class="s">'Will'</span><span class="p">,</span> <span class="s">'Will'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NNP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC59">  <span class="p">(</span><span class="s">'be'</span><span class="p">,</span> <span class="s">'be'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VB'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC60">  <span class="p">(</span><span class="s">'the'</span><span class="p">,</span> <span class="s">'the'</span><span class="p">,</span> <span class="p">[</span><span class="s">'DT'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC61">  <span class="p">(</span><span class="s">'last'</span><span class="p">,</span> <span class="s">'last'</span><span class="p">,</span> <span class="p">[</span><span class="s">'JJ'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC62">  <span class="p">(</span><span class="s">'time'</span><span class="p">,</span> <span class="s">'time'</span><span class="p">,</span> <span class="p">[</span><span class="s">'NN'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC63">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC64">  <span class="p">(</span><span class="s">'visit'</span><span class="p">,</span> <span class="s">'visit'</span><span class="p">,</span> <span class="p">[</span><span class="s">'VBP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC65">  <span class="p">(</span><span class="s">','</span><span class="p">,</span> <span class="s">','</span><span class="p">,</span> <span class="p">[</span><span class="s">','</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC66">  <span class="p">(</span><span class="s">'I'</span><span class="p">,</span> <span class="s">'I'</span><span class="p">,</span> <span class="p">[</span><span class="s">'PRP'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC67">  <span class="p">(</span><span class="s">'recommend others to avoid'</span><span class="p">,</span> <span class="s">'recommend others to avoid'</span><span class="p">,</span> <span class="p">[</span><span class="s">'negative'</span><span class="p">]),</span></div><div class="line" id="file-tagging_inverters-py-LC68">  <span class="p">(</span><span class="s">'.'</span><span class="p">,</span> <span class="s">'.'</span><span class="p">,</span> <span class="p">[</span><span class="s">'.'</span><span class="p">])]]</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969016/raw/tagging_inverters.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969016#file-tagging_inverters-py">tagging_inverters.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>Then, we could adapt our sentiment_score function. We want it to flip the polarity of a sentiment word when is preceded by an inverter:</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969825(4).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969825" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-sentiment_score_flips-py-L1" rel="file-sentiment_score_flips-py-L1">1</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L2" rel="file-sentiment_score_flips-py-L2">2</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L3" rel="file-sentiment_score_flips-py-L3">3</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L4" rel="file-sentiment_score_flips-py-L4">4</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L5" rel="file-sentiment_score_flips-py-L5">5</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L6" rel="file-sentiment_score_flips-py-L6">6</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L7" rel="file-sentiment_score_flips-py-L7">7</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L8" rel="file-sentiment_score_flips-py-L8">8</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L9" rel="file-sentiment_score_flips-py-L9">9</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L10" rel="file-sentiment_score_flips-py-L10">10</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L11" rel="file-sentiment_score_flips-py-L11">11</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L12" rel="file-sentiment_score_flips-py-L12">12</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L13" rel="file-sentiment_score_flips-py-L13">13</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L14" rel="file-sentiment_score_flips-py-L14">14</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L15" rel="file-sentiment_score_flips-py-L15">15</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L16" rel="file-sentiment_score_flips-py-L16">16</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L17" rel="file-sentiment_score_flips-py-L17">17</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L18" rel="file-sentiment_score_flips-py-L18">18</span>
            <span class="line-number" id="file-sentiment_score_flips-py-L19" rel="file-sentiment_score_flips-py-L19">19</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-sentiment_score_flips-py-LC1"><span class="k">def</span> <span class="nf">sentence_score</span><span class="p">(</span><span class="n">sentence_tokens</span><span class="p">,</span> <span class="n">previous_token</span><span class="p">,</span> <span class="n">acum_score</span><span class="p">):</span>    </div><div class="line" id="file-sentiment_score_flips-py-LC2">    <span class="k">if</span> <span class="ow">not</span> <span class="n">sentence_tokens</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_flips-py-LC3">        <span class="k">return</span> <span class="n">acum_score</span></div><div class="line" id="file-sentiment_score_flips-py-LC4">    <span class="k">else</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_flips-py-LC5">        <span class="n">current_token</span> <span class="o">=</span> <span class="n">sentence_tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div><div class="line" id="file-sentiment_score_flips-py-LC6">        <span class="n">tags</span> <span class="o">=</span> <span class="n">current_token</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div><div class="line" id="file-sentiment_score_flips-py-LC7">        <span class="n">token_score</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">value_of</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span> <span class="k">for</span> <span class="n">tag</span> <span class="ow">in</span> <span class="n">tags</span><span class="p">])</span></div><div class="line" id="file-sentiment_score_flips-py-LC8">        <span class="k">if</span> <span class="n">previous_token</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_flips-py-LC9">            <span class="n">previous_tags</span> <span class="o">=</span> <span class="n">previous_token</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div><div class="line" id="file-sentiment_score_flips-py-LC10">            <span class="k">if</span> <span class="s">'inc'</span> <span class="ow">in</span> <span class="n">previous_tags</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_flips-py-LC11">                <span class="n">token_score</span> <span class="o">*=</span> <span class="mf">2.0</span></div><div class="line" id="file-sentiment_score_flips-py-LC12">            <span class="k">elif</span> <span class="s">'dec'</span> <span class="ow">in</span> <span class="n">previous_tags</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_flips-py-LC13">                <span class="n">token_score</span> <span class="o">/=</span> <span class="mf">2.0</span></div><div class="line" id="file-sentiment_score_flips-py-LC14">            <span class="k">elif</span> <span class="s">'inv'</span> <span class="ow">in</span> <span class="n">previous_tags</span><span class="p">:</span></div><div class="line" id="file-sentiment_score_flips-py-LC15">                <span class="n">token_score</span> <span class="o">*=</span> <span class="o">-</span><span class="mf">1.0</span></div><div class="line" id="file-sentiment_score_flips-py-LC16">        <span class="k">return</span> <span class="n">sentence_score</span><span class="p">(</span><span class="n">sentence_tokens</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">current_token</span><span class="p">,</span> <span class="n">acum_score</span> <span class="o">+</span> <span class="n">token_score</span><span class="p">)</span></div><div class="line" id="file-sentiment_score_flips-py-LC17">&nbsp;</div><div class="line" id="file-sentiment_score_flips-py-LC18"><span class="k">def</span> <span class="nf">sentiment_score</span><span class="p">(</span><span class="n">review</span><span class="p">):</span></div><div class="line" id="file-sentiment_score_flips-py-LC19">    <span class="k">return</span> <span class="nb">sum</span><span class="p">([</span><span class="n">sentence_score</span><span class="p">(</span><span class="n">sentence</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)</span> <span class="k">for</span> <span class="n">sentence</span> <span class="ow">in</span> <span class="n">review</span><span class="p">])</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969825/raw/sentiment_score_flips.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969825#file-sentiment_score_flips-py">sentiment_score_flips.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>Recalculating again the sentiment score:</p>

        <script src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/3969825(5).js">
        </script><link rel="stylesheet" href="https://gist-assets.github.com/assets/embed-e8861c84ff85edae1cf9869dd551c98d.css"><div id="gist3969825" class="gist">
        <div class="gist-file">
          <div class="gist-data gist-syntax">
            



    <div class="file-data">
      <table cellpadding="0" cellspacing="0" class="lines highlight">
        <tbody><tr>
          <td class="line-numbers">
            <span class="line-number" id="file-example_exec_3-py-L1" rel="file-example_exec_3-py-L1">1</span>
            <span class="line-number" id="file-example_exec_3-py-L2" rel="file-example_exec_3-py-L2">2</span>
          </td>
          <td class="line-data">
            <pre class="line-pre"><div class="line" id="file-example_exec_3-py-LC1"><span class="n">sentiment_score</span><span class="p">(</span><span class="n">dict_tagged_sentences</span><span class="p">)</span></div><div class="line" id="file-example_exec_3-py-LC2"><span class="o">-</span><span class="mf">5.0</span></div></pre>
          </td>
        </tr>
      </tbody></table>
    </div>

          </div>
          <div class="gist-meta">
            <a href="https://gist.github.com/fjavieralba/3969825/raw/example_exec_3.py" style="float:right">view raw</a>
            <a href="https://gist.github.com/fjavieralba/3969825#file-example_exec_3-py">example_exec_3.py</a>
            hosted with ‚ù§ by <a href="https://github.com/">GitHub</a>
          </div>
        </div>
</div>

        <p>It's now -5.0 since "not bad" is considered positive.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>We have seen a little introduction to some basic techniques and algorithms that can give us an overall "score" of how positive or negative a review is.</p>
<p>The steps we've followed are:</p>
<blockquote>
<ul class="simple">
<li>Split the text into sentences, and each sentence into tokens</li>
<li>Add POS (Part Of Speech) tags to the Splitted text, using NLTK</li>
<li>Enrich the POS-tagged text with our own tags using dictionaries. These tags are in a different "semantic level" than POS-tags: "positive", "negative", "inverter", "incrementer" and "decrementer"</li>
<li>Implement some basic extraction rules over the tagged text, in form of python functions</li>
</ul>
</blockquote>
<p>That could be a good starting point to someone interested in sentiment analysis, but this is only the very beginning.</p>
<p>In a real-life system you should work harder, especially in the extraction-rules part (and, of course, in the dictionaries).</p>
<p>The method described so far is a rule-based approach. There are other techniques to perform sentiment analysis, for example, applying machine-learning algorithms. In any case, I think that advanced rule-based or machine-learning systems are out of scope in an introductory post like this.</p>
<p>Hope you enjoyed the reading!</p>
</div>

    
    <div class="twitter">
<iframe id="twitter-widget-0" scrolling="no" frameborder="0" allowtransparency="true" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/tweet_button.1407888064.htm" class="twitter-share-button twitter-tweet-button twitter-share-button twitter-count-horizontal" title="Twitter Tweet Button" data-twttr-rendered="true" s3090004214175398350="true" replaced="true" style="width: 110px; height: 20px;"></iframe>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div>
        <p class="tags">This entry was tagged as
            <a href="http://fjavieralba.com/tag/python.html">python</a>
            <a href="http://fjavieralba.com/tag/nlp.html">nlp</a>
            <a href="http://fjavieralba.com/tag/sentiment-analysis.html">sentiment analysis</a>
          </p>
        <div id="disqus_thread"><iframe id="dsq-2" data-disqus-uid="2" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" width="100%" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/saved_resource(1).htm" style="width: 100% !important; border: none !important; overflow: hidden !important; height: 5886px !important;" horizontalscrolling="no" verticalscrolling="no" s3090004214175398350="true" replaced="true"></iframe><iframe id="dsq-indicator-north" data-disqus-uid="indicator-north" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 740px !important; border: none !important; overflow: hidden !important; top: 0px !important; min-width: 740px !important; max-width: 740px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;" s3090004214175398350="true" replaced="true"></iframe><iframe id="dsq-indicator-south" data-disqus-uid="indicator-south" allowtransparency="true" frameborder="0" scrolling="no" tabindex="0" title="Disqus" style="width: 740px !important; border: none !important; overflow: hidden !important; bottom: 0px !important; min-width: 740px !important; max-width: 740px !important; position: fixed !important; z-index: 2147483646 !important; height: 29px !important; min-height: 29px !important; max-height: 29px !important; display: none !important;" s3090004214175398350="true" replaced="true"></iframe></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'fjavieralba'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the &lt;a href="http://disqus.com/?ref_noscript"&gt;comments powered by Disqus.&lt;/a&gt;</noscript>
        </div>
        
                    <div class="footer">
  <p>¬© Copyright <script language="JavaScript">var date = new Date(); document.write(date.getFullYear());</script>2014 by F. Javier Alba</p>
  <p> Powered by <a href="http://pypi.python.org/pypi/pelican/" target="_blank">Pelican</a>.  
    <a href="https://github.com/fjavieralba/flasky">Theme</a>  by <a href="http://fjavieralba.com/">fjavieralba</a>
  </p> 
  <p>
    </p><div class="social" style="font-size: 27px;">
      <ul>
        <script language="JavaScript">
          u = 'me';
          s = 'fjavieralba.com';
          document.write('<a href=\"mailto:' + u + '@' + s + '\" target=\"_blank\">');
        </script><a href="mailto:me@fjavieralba.com" target="_blank">
            <li><i class="icon-envelope icon-large"></i> </li>
        </a>
        <a href="http://twitter.com/fjavieralba" target="_blank"> <li> <i class="icon-twitter-sign icon-large"> </i></li> </a>
        <a href="http://es.linkedin.com/in/fjavieralba/en"><li><i class="icon-linkedin-sign icon-large"></i></li></a>
        <a href="http://github.com/fjavieralba" target="_blank"> <li> <i class="icon-github-sign icon-large"></i> </li> </a>
        <a href="http://fjavieralba.com/feeds/all.rss.xml" rel="alternate" title="Recent Blog Posts"><li> <i class="icon-rss icon-large"></i> </li></a>
      </ul>
    </div>
  <p></p>
</div>            </div>
        <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-30867493-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
      

<div id="__yael_once"></div><iframe id="fouserdata" src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/UserData.htm" style="position: absolute; width: 1px; height: 1px; left: -100px; top: -100px; visibility: hidden;" s3090004214175398350="true" replaced="true"></iframe><div style="position:absolute;display:none;"><img src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/throbber.gif"></div><div style="display:none;position:absolute"><div class="nsrnd_it_cmadid"><div class="nsrnd_it_wrapper"><div class="nsrnd_it_point"><div class="nsrnd_it_point_contain"><div class="nsrnd_it_point_div"></div><div class="nsrnd_it_point_arrw nsrnd_it_bg"></div></div></div><div class="nsrnd_it_main"><div class="nsrnd_it_main_contain"><div class="nsrnd_it_close nsrnd_it_bg"></div><div class="nsrnd_it_mcc"></div></div></div><div class="nsrnd_it_foot"><div class="nsrnd_it_tlc nsrnd_it_bg"></div><div class="nsrnd_it_tcc nsrnd_it_bg"><span style="color: rgb(255, 255, 255); display: inline-block; cursor: default; text-shadow: 0px 2px 2px rgb(73, 73, 73); line-height: 17px; font-weight: bold; font-size: 10px; float: right; margin: 0px 10px 0px 0px;">MiinimumPrice</span></div></div><div class="nsrnd_it_cl"></div></div></div>
</div><img src="./Basic Sentiment Analysis with Python   fjavieralba.com_files/main_imgs.png" style="display: none;"></body></html>